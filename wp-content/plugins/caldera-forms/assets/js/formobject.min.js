!function(t){function a(a){if(a.data("form")){var e="/cf-api/"+a.data("form")+"/";a.data("entry")&&(e+=a.data("entry")+"/"),e+="?cf_instance="+(t(".caldera_forms_form."+a.data("form")).length+1),a.data("width")?a.css({width:a.data("width")}):a.css({width:!1}),t.get(e,function(e){t("#modal-"+a.data("form")+"-content").html(e),resBaldrickTriggers(),"undefined"!=typeof caldera_conditionals&&calders_forms_init_conditions()})}}if(t.fn.formJSON=function(){for(var a=t(this),e=a.find("[name]"),r={},d={},o=0;o<e.length;o++){var i=t(e[o]),s=i.prop("name").replace(/\]/gi,"").split("["),n=i.val(),f={};if(!i.is(":radio")&&!i.is(":checkbox")||i.is(":checked")){for(var l=s.length-1;l>=0;l--){var c=s[l];if("undefined"==typeof c&&(c=""),0===c.length&&(f=[],"undefined"==typeof d[s[l-1]]?d[s[l-1]]=0:d[s[l-1]]+=1,c=d[s[l-1]]),l===s.length-1){if(n)if("true"===n)n=!0;else if("false"===n)n=!1;else if(isNaN(parseFloat(n))||parseFloat(n).toString()!==n)if("string"!=typeof n||"{"!==n.substr(0,1)&&"["!==n.substr(0,1)){if("object"==typeof n&&n.length&&i.is("select")){for(var m={},l=0;l<n.length;l++)m["n"+l]=n[l];n=m}}else try{n=JSON.parse(n)}catch(p){}else n=parseFloat(n);f[c]=n}else{var h=f;f={},f[c]=h}}t.extend(!0,r,f)}}return r},t(".caldera_forms_form").on("click",".cf-form-trigger",function(a){var e=t(this);form=e.closest("form.caldera_forms_form"),form_id=form.prop("id"),calderaforms=window[form_id],data=form.formJSON(),fields={},target=e.data("target");for(var r in calderaforms)fields[calderaforms[r].slug]=data[r];if("function"==typeof window[target])window[target](fields,a);else{try{var d=t(target)}catch(o){}if(d&&d.length){fields=JSON.stringify(fields);var i=["textarea","text","hidden"];d.each(function(a,e){this.type&&i.indexOf(this.type)>=0?t(this).val(fields).trigger("change"):this.innerHTML=fields})}else t.post(target,fields)}}),cfModals){var e=t("head"),r=t("body");for(var d in cfModals.style)t("#cf-"+d+"-styles-css").length||e.append('<link id="cf-'+d+'-styles-css" rel="stylesheet" type="text/css" href="'+cfModals.style[d]+'">');for(var o in cfModals.script)t('script[src^="'+cfModals.script[o]+'"]').length||null===cfModals.script[o]||r.append('<script src="'+cfModals.script[o]+'" type="text/javascript">');t(".caldera-forms-modal").each(function(){var e=t(this),r=e.data("form"),d="";e.data("entry")&&(d+='data-entry="'+e.data("entry")+'"'),e.data("width")&&(d+='data-width="'+e.data("width")+'"'),t("body").append('<div class="remodal" data-form="'+r+'" '+d+' data-remodal-id="modal-'+r+'" id="modal-'+r+'"><button data-remodal-action="close" class="remodal-close"></button><div class="modal-content" id="modal-'+r+'-content"><span class="caldera-grid cf_processing cf_modal"></span></div></div>'),a(t("#modal-"+r))}),t(document).on("opened",".remodal",function(){t(document).trigger("cf.modal",t(this))}),t(document).on("cf.submission",function(e,r){setTimeout(function(){var e=t('[data-remodal-id="modal-'+r.data.form_id+'"]').remodal();a(e.$modal),"opened"===e.getState()&&e.close()},1500)})}}(jQuery);