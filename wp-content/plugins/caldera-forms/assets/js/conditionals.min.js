var calders_forms_check_conditions,calders_forms_init_conditions;!function(e){var r={},t={};Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,t=Number(arguments[1])||0;for((t=t<0?Math.ceil(t):Math.floor(t))<0&&(t+=r);t<r;t++)if(t in this&&this[t]===e)return t;return-1}),cf_debounce=function(e,r,t){var i;return function(){var a=this,n=arguments,o=t&&!i;clearTimeout(i),i=setTimeout(function(){i=null,t||e.apply(a,n)},r),o&&e.apply(a,n)}},calders_forms_check_conditions=function(i){if("undefined"!=typeof caldera_conditionals&&void 0!==caldera_conditionals[i]){var a=e(document.getElementById(i)),n=function(e){if("object"==typeof window.cfstate&&window.cfstate.hasOwnProperty(e))return window.cfstate[e];return null}(i);for(var o in caldera_conditionals[i]){if(jQuery("#conditional_"+o).length){var d=caldera_conditionals[i][o].type,l=caldera_conditionals[i][o].group,c=[];for(var s in l){var f={},u=l[s];for(var h in u){var g=a.find('[data-field="'+u[h].field+'"]'),p=[],m="function"==typeof u[h].value?u[h].value():u[h].value;if(void 0!==u[h].selectors)for(var v in u[h].selectors){var y=new RegExp(v,"g");m=m.replace(y,e(u[h].selectors[v]).val())}if(f[h]=!1,g.is(":radio,:checkbox"))g=g.filter(":checked");else if(g.is("div"))g=jQuery("<input>").val(g.html());else if(!g.length){a.find('[data-calc-field="'+u[h].field+'"]').length&&(g=a.find('[data-calc-field="'+u[h].field+'"]'))}if(g.length)for(var b=0;b<g.length;b++)p.push(g[b].value);else p.push(u[h].field);switch(u[h].compare){case"is":p.length&&p.indexOf(m.toString())>=0&&(f[h]=!0);break;case"isnot":p.length&&p.indexOf(m)<0&&(f[h]=!0);break;case">":case"greater":f[h]=parseFloat(p.reduce(function(e,r){return e+r}))>parseFloat(m);break;case"<":case"smaller":f[h]=parseFloat(p.reduce(function(e,r){return e+r}))<parseFloat(m);break;case"startswith":for(b=0;b<p.length;b++)p[b].toLowerCase().substr(0,m.toLowerCase().length)===m.toLowerCase()&&(f[h]=!0);break;case"endswith":for(b=0;b<p.length;b++)p[b].toLowerCase().substr(p[b].toLowerCase().length-m.toLowerCase().length)===m.toLowerCase()&&(f[h]=!0);break;case"contains":for(b=0;b<p.length;b++)p[b].toLowerCase().indexOf(m)>=0&&(f[h]=!0)}}istrue=!0;for(var _ in f)if(!1===f[_]){istrue=!1;break}c.push(istrue)}var w,k=jQuery("#conditional-"+o+"-tmpl").html(),j=jQuery("#conditional_"+o),Q=jQuery('[data-field="'+o+'"]');if(c.length&&c.indexOf(!0)>=0?"show"===d?w="show":"hide"===d?w="hide":"disable"===d&&(w="disable"):w="show"===d?"hide":"disable"===d?"enable":"show","show"===w)j.html().length||(j.html(k).trigger("cf.add",{field:o}),jQuery(document).trigger("cf.add",{field:o}),x(o,n));else if("hide"===w)j.html().length&&(L(o,n),Q.val("").empty().prop("checked",!1),j.empty().trigger("cf.remove",{field:o}),jQuery(document).trigger("cf.remove",{field:o}));else if("enable"===w||"disable"===w){var C=jQuery("#"+o);"enable"==w?j.html().length?C.prop("disabled",!1):(j.html(k).trigger("cf.add",{field:o}),jQuery(document).trigger("cf.add").trigger("cf.enable",{field:o}),C.prop("disabled",!1)):j.html().length?C.prop("disabled","disabled",{field:o}):(j.html(k).trigger("cf.remove"),jQuery(document).trigger("cf.remove",{field:o}).trigger("cf.disable",{field:o}),C.prop("disabled","disabled",{field:o}))}}}}function x(i,n){var o,d=function(e){if(r[e])return r[e]}(i);if(void 0!=d)if("object"==typeof d)for(var l in d)!0===d[l]&&(o=e(document.getElementById(l))).prop("checked",!0);else(o=e("#"+i)).val(d);null!==n&&(n.rebind(i),void 0===o&&(o=e("#"+i)),t.hasOwnProperty(i)&&(o.attr("data-unsync","1"),o.removeAttr("data-sync"),o.removeAttr("data-binds")),void 0!==o&&o.data("sync")&&new CalderaFormsFieldSync(o,o.data("binds"),a,e,n))}function L(i,a){var n=e(document.getElementById(i));if(n.length){var o=n.val();o&&(r[i]=o)}else{var d;n=e("."+i),r[i]={},n.each(function(t,a){(d=e(a)).prop("checked")?r[i][d.attr("id")]=!0:r[i][d.attr("id")]=!1})}n.data("unsync")&&(t[i]=!0),null!==a&&a.unbind(i)}},"undefined"!=typeof caldera_conditionals&&((calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(r){var t=e(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(t)},10))})(),jQuery(".caldera_forms_form").find("[data-field]").first().trigger("change"))}(jQuery);