var cf_jsfields_init,cf_validate_form;!function(a){cf_validate_form=function(a){return a.parsley({errorsWrapper:'<span class="help-block caldera_ajax_error_block"></span>',errorTemplate:"<span></span>",errorsContainer:function(a){return a.$element.closest(".form-group")}}).on("field:error",function(){this.$element.closest(".form-group").addClass("has-error")}).on("field:success",function(){this.$element.closest(".form-group").removeClass("has-error")})},a("[data-sync]").each(function(){for(var e=a(this),r=e.data("binds"),t=e.closest("form"),i=0;i<r.length;i++)a(document).on("keyup change blur mouseover","[data-field='"+r[i]+"']",function(){var r=e.data("sync");if(id=a(this).data("field"),reg=new RegExp("{{([^}]*?)}}","g"),template=r.match(reg),!e.data("unsync")){for(var i=0;i<template.length;i++){for(var d=template[i].replace(/\}/g,"").replace(/\{/g,""),n=new RegExp(template[i],"g"),o=t.find("[data-field='"+d+"']"),s="",l=0;l<o.length;l++){var f=a(o[l]);(!f.is(":radio")&&!f.is(":checkbox")||f.is(":checked"))&&(s+=f.val())}r=r.replace(n,s)}e.val(r)}}),a("[data-field='"+r[i]+"']").trigger("change")}),a(document).on("change keypress","[data-sync]",function(){a(this).data("unsync",!0)}),cf_jsfields_init=function(){a(".init_field_type[data-type]").each(function(e,r){var t=a(r);"function"==typeof window[t.data("type")+"_init"]&&window[t.data("type")+"_init"](t.prop("id"),t[0])}),"undefined"!=typeof cfValidatorLocal&&window.Parsley.setLocale(cfValidatorLocal),"undefined"!=typeof cfModals&&"undefined"!=typeof cfModals.config&&"undefined"!=typeof cfModals.config.validator_lang&&window.Parsley.setLocale(cfModals.config.validator_lang),window.Parsley.on("field:validated",function(){setTimeout(function(){a(document).trigger("cf.error")},15)}),"undefined"==typeof resBaldrickTriggers&&a(".caldera_forms_form").length},a("document").ready(function(){cf_jsfields_init()}),a(".caldera-form-page").length&&a(".caldera-form-page").on("keypress","[data-field]:not(textarea)",function(a){13===a.keyCode&&a.preventDefault()}),a(document).on("click",".cf_modal_button",function(e){e.preventDefault();var r=a(this);a(r.attr("href")).show()}),a(document).on("click",".caldera-front-modal-closer",function(e){e.preventDefault();var r=a(this);r.closest(".caldera-front-modal-container").hide()}),a(document).on("cf.add cf.enable cf.disable cf.pagenav",cf_jsfields_init),a(document).on("click","[data-page]",function(e){var r,t,i,d=a(this),n=d.closest(".caldera-form-page"),o=d.closest("form.caldera_forms_form"),s=o.data("instance"),l=o.find(".caldera-form-page:visible").data("formpage"),f=n.data("formpage")?n.data("formpage"):d.data("page"),c=a('.breadcrumb[data-form="caldera_form_'+s+'"]'),p=!0,g={};if(o.length){if(cf_validate_form(o).destroy(),i=o.find("[data-field]"),o.find(".has-error").removeClass("has-error"),"prev"!==d.data("page")&&f>=l)for(var m=0;m<i.length;m++){var u=a(i[m]);if(u.is(":radio,:checkbox")){if(!u.hasClass("option-required")||!1===u.is(":visible"))continue;g[u.data("field")]||(g[u.data("field")]=[]),g[u.data("field")].push(u.prop("checked"))}else{if(u.prop("required")&&!1===u.is(":visible"))continue;if(u.prop("required")&&!0!==u.parsley().isValid()){if(u.is(":visible"))u.parsley().validate(),e.preventDefault();else{var v=parseFloat(u.closest(".caldera-form-page[data-formpage]").data("formpage"));v<parseFloat(f)&&o.find('[data-page="'+v+'"]').addClass("has-error")}p=!1}}}for(var h in g)g[h].indexOf(!0)<0?(a('[for="'+h+"_"+s+'"]').parent().addClass("has-error"),p=!1):a('[for="'+h+"_"+s+'"]').parent().removeClass("has-error");if(!1===p)return cf_validate_form(o).validate(),!1;"next"===d.data("page")?(c&&c.find("li.active").removeClass("active").children().attr("aria-expanded","false"),r=o.find('.caldera-form-page[data-formpage="'+(f+1)+'"]'),r.length&&(n.hide().attr("aria-hidden","true").css("visibility","hidden"),r.show().attr("aria-hidden","false").css("visibility","visible"),c&&c.find('a[data-page="'+(f+1)+'"]').attr("aria-expanded","true").parent().addClass("active"))):"prev"===d.data("page")?(c&&c.find("li.active").removeClass("active").children().attr("aria-expanded","false"),t=o.find('.caldera-form-page[data-formpage="'+(f-1)+'"]'),t.length&&(n.hide().attr("aria-hidden","true").css("visibility","hidden"),t.show().attr("aria-hidden","false").css("visibility","visible"),c&&c.find('a[data-page="'+(f-1)+'"]').attr("aria-expanded","true").parent().addClass("active"))):d.data("pagenav")&&(e.preventDefault(),d.closest(".breadcrumb").find("li.active").removeClass("active").children().attr("aria-expanded","false"),a("#"+d.data("pagenav")+" .caldera-form-page").hide().attr("aria-hidden","true").css("visibility","hidden"),a("#"+d.data("pagenav")+'	.caldera-form-page[data-formpage="'+d.data("page")+'"]').show().attr("aria-hidden","false").css("visibility","visible"),d.parent().addClass("active").children().attr("aria-expanded","true")),a("html, body").animate({scrollTop:o.offset().top-100},200),a(document).trigger("cf.pagenav")}});var e;a(".caldera-grid .breadcrumb").each(function(r,t){a(t).find("a[data-pagenav]").each(function(r,t){var i=a(t),d=i.data("pagenav"),n=a("#"+d+' .caldera-form-page[data-formpage="'+i.data("page")+'"]');n.find(".has-error").length&&(i.parent().addClass("error"),"undefined"==typeof e&&(i.trigger("click"),e=!0))})}),a(document).on("click",'form.caldera_forms_form [type="submit"]',function(e){var r=a(this),t=r.closest(".caldera_forms_form"),i=cf_validate_form(t);i.validate()?i.destroy():e.preventDefault()})}(jQuery);