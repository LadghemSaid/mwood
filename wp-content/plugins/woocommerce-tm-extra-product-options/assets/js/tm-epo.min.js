!function(t){"use strict";function e(e,a){var i;return i=t(e).is(".cpf_hide_element")?t(e):t(e).closest(".cpf_hide_element"),!1!==t(i).data("isactive")&&!1!==t(i).closest(".cpf-section").data("isactive")?(t(e).prop("disabled",!1),"yes"!==tm_epo_js.tm_epo_show_only_active_quantities?t(e).is(":radio")?t(e).is(":checked")?i.find(".tm-qty").prop("disabled",!1):i.find(".tm-qty").prop("disabled",!0):t(e).is("select")?t(e).val()?i.find(".tm-qty").prop("disabled",!1):i.find(".tm-qty").prop("disabled",!0):i.find(".tm-qty").prop("disabled",!1):a||i.find(".tm-quantity").trigger("showhide.cpfcustom"),t(e).is(".cpf_hide_element")||(t(e).removeClass("tcdisabled").addClass("tcenabled"),t(e).is(".tmcp-upload")&&t(e).next(".tmcp-upload-hidden").length&&t(e).next(".tmcp-upload-hidden").removeClass("tcdisabled").addClass("tcenabled").prop("disabled",!1)),!0):(t(e).is(".cpf_hide_element")||(t(e).prop("disabled",!0),t(e).removeClass("tcenabled").addClass("tcdisabled"),i.find(".tm-qty").prop("disabled",!0),t(e).is(".tmcp-upload")&&t(e).next(".tmcp-upload-hidden").length&&t(e).next(".tmcp-upload-hidden").removeClass("tcenabled").addClass("tcdisabled").prop("disabled",!0)),!1)}function a(t){var e;if(void 0!==t.per_product_pricing)e=t.per_product_pricing;else if(void 0!==t.is_priced_individually)for(var a in t.is_priced_individually)if("yes"==(e=t.is_priced_individually[a]))return!0;return!0===e}function i(a){t(a).length||(a="body");var i=(a=t(a)).find(".iscpfdependson");i.each(function(e,a){t(a).each(function(e,a){o(t(a))})}),i.each(function(e,a){t(a).each(function(e,a){o(t(a),"cpflogic")})}),i.each(function(a,i){t(i).each(function(a,i){(i=t(i)).is(".cpf-section")&&(i=i.find(".cpf_hide_element")),i.each(function(a,i){e(t(i).find(".tm-epo-field"))})})}),t().selectric&&t(".tm-extra-product-options select").selectric("refresh"),t(".tm-owl-slider").each(function(){t(this).trigger("refresh.owl.carousel")});var r=[];a.find(".tm-product-image:checked,select.tm-product-image").each(function(){var a=t(this);e(a)&&""!==a.val()&&r.push(a)}),r.length&&r[r.length-1].trigger("tm_trigger_product_image"),Y.trigger("cpflogicrun"),Y.trigger("tmlazy"),Y.trigger("cpflogicdone")}function o(a,i){a.each(function(a,o){var r=t(this),c=r.data("matches"),d=r.data("toggle"),s=r.data("what"),l=r.data("fields"),p=0,m=!1;switch(d){case"show":m=!1;break;case"hide":m=!0}t.each(l,function(a,o){var r=!0;"cpflogic"==i&&(r=e(t(o.element))),r&&n(o)&&p++}),"all"==s?c==p&&(m=!m):p>0&&(m=!m),m?("cpflogic"==i&&r.find(".tm-epo-field").each(function(a,i){!e(i=t(i))||i.data("initial_activation")||r.closest(".cpf-section").is(".tc-hidden")||(i.trigger("tc_element_epo_rules"),i.data("initial_activation",1))}),r.removeClass("tc-hidden")):r.addClass("tc-hidden"),r.data("isactive",m)})}function r(a,i){var o,r=!0,n=a.find(".cpf_hide_element");return t(n).each(function(a,n){if(n=t(n),e(n)){var c=n.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(c.length>0){switch(c=c[0]){case"cpf-type-radio":var s=n.find("input.tm-epo-field.tmcp-radio:checked");"isnotempty"==i?r=r&&s.length>0:"isempty"==i&&(r=r&&0===s.length);break;case"cpf-type-checkbox":var l=n.find("input.tm-epo-field.tmcp-checkbox:checked");"isnotempty"==i?r=r&&l.length>0:"isempty"==i&&(r=r&&0===l.length);break;case"cpf-type-select":var p=n.find("select.tm-epo-field.tmcp-select").children("option"),m=n.find("select.tm-epo-field.tmcp-select").children("option:selected"),_=p.index(m);""===p.eq(0).val()&&""===p.eq(0).attr("data-rulestype")&&(_-=1);var f="_"+_;f=f.length,(o=n.find("select.tm-epo-field.tmcp-select").val())&&(o=o.slice(0,-f));break;case"cpf-type-textarea":o=n.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":o=n.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":o=n.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":o=n.find("input.tm-epo-field.tmcp-range").val()}r=r&&d(o,"",i)}else r=r&&!1}}),r}function n(e){var a,i,o,n=t(e.element),s=e.operator,l=e.value;if(!n.length)return!1;if(n.is(".cpf-section"))return r(n,s);var p=n.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(p.length>0){switch(p=p[0]){case"cpf-type-radio":var m=n.find("input.tm-epo-field.tmcp-radio"),_=n.find("input.tm-epo-field.tmcp-radio:checked");if("is"==s||"isnot"==s){if(0===_.length)return!1;i=m.index(_),o=(o="_"+i).length,(a=n.find("input.tm-epo-field.tmcp-radio:checked").val())&&(a=a.slice(0,-o))}else{if("isnotempty"==s)return _.length>0;if("isempty"==s)return 0===_.length}break;case"cpf-type-checkbox":var f=n.find("input.tm-epo-field.tmcp-checkbox"),u=n.find("input.tm-epo-field.tmcp-checkbox:checked");if("is"==s||"isnot"==s){if(0===u.length)return!1;var g=!1;return u.each(function(e,r){if(i=f.index(t(r)),o="_"+i,o=o.length,(a=t(r).val())&&(a=a.slice(0,-o)),d(a,l,s))g=!0;else if("isnot"==s)return g=!1,!1}),g}if("isnotempty"==s)return u.length>0;if("isempty"==s)return 0===u.length;break;case"cpf-type-select":var h=n.find("select.tm-epo-field.tmcp-select").children("option"),v=n.find("select.tm-epo-field.tmcp-select").children("option:selected");i=h.index(v),""===h.eq(0).val()&&""===h.eq(0).attr("data-rulestype")&&(i-=1),o=(o="_"+i).length,(a=n.find("select.tm-epo-field.tmcp-select").val())&&(a=a.slice(0,-o));break;case"cpf-type-textarea":a=n.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":a=n.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":a=n.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":a=n.find("input.tm-epo-field.tmcp-range").val();break;case"cpf-type-variations":return c(n,l,s)}return d(a,l,s)}return!1}function c(e,a,i){null!==e&&null!==a&&(a=a?parseInt(a):-1);var o,r=t(e).closest(".variations_form"),n='input[name^="variation_id"]';switch(r.find("input.variation_id").length>0&&(n="input.variation_id"),o=parseInt(r.find(n).val()),isNaN(o)&&(o=""),isNaN(a)&&(a=""),i){case"is":return""!==o&&o==a;case"isnot":return""!==o&&o!=a;case"isempty":return""===o||0===o;case"isnotempty":return""!==o&&0!==o;case"startswith":return o.startsWith(a);case"endswith":return o.endsWith(a);case"greaterthan":return parseFloat(o)>parseFloat(a);case"lessthan":return parseFloat(o)<parseFloat(a)}return!1}function d(e,a,i){switch(null!==e&&null!==a&&(e=encodeURIComponent(e),a=t.qtranxj_split?encodeURIComponent(t.qtranxj_split(decodeURIComponent(a))[tm_epo_q_translate_x_clogic_js.language]):encodeURIComponent(decodeURIComponent(a)),e=e?e.toLowerCase():"",a=a?a.toLowerCase():""),i){case"is":return null!==e&&e==a;case"isnot":return null!==e&&e!=a;case"isempty":return!(void 0!==e&&""!==e);case"isnotempty":return void 0!==e&&""!==e;case"startswith":return e.startsWith(a);case"endswith":return e.endsWith(a);case"greaterthan":return parseFloat(e)>parseFloat(a);case"lessthan":return parseFloat(e)<parseFloat(a)}return!1}function s(e){var a=t(e);if(0!==a.length){if(a.is(".cpf-section"))return e.find(".tm-epo-field");var i=a.attr("data-uniqid"),o=a.closest(".tc-extra-product-options").attr("data-epo-id");if(O&&O[o]&&O[o][i])return O[o][i];var r=a.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(r.length>0)switch(r=r[0]){case"cpf-type-radio":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-radio"),O[o][i];case"cpf-type-checkbox":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-checkbox"),O[o][i];case"cpf-type-select":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-select"),O[o][i];case"cpf-type-textarea":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-textarea"),O[o][i];case"cpf-type-textfield":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-textfield"),O[o][i];case"cpf-type-color":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tm-color-picker"),O[o][i];case"cpf-type-range":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-range"),O[o][i];case"cpf-type-date":return O[o]=[],O[o][i]=a.find(".tm-epo-field.tmcp-date"),O[o][i];case"cpf-type-variations":return O[o]=[],O[o][i]=a.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element"),O[o][i]}else;}}function l(t){return"object"==typeof t&&"toggle"in t&&"what"in t&&"rules"in t&&t.rules.length>0}function p(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.each(function(e,o){(t(o).is(".cpf-section")?t(o):t(o).find(".cpf-section")).each(function(e,o){var r=t(o),n=r.data("logic"),c=[];1==parseInt(r.data("haslogic"))&&l(n)&&(t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,d=e.element,s=e.operator,l=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=d!=n?o.find(".cpf_hide_element").eq(d):o):r=d!=n?i.find(".cpf_hide_element").eq(d):o,c.push({element:r,operator:s,value:l})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",c),r.cpfdependson(c,n.toggle,n.what)))})})}function m(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.find(".cpf_hide_element").each(function(e,o){var r=t(o),n=r.data("logic");if(1==parseInt(r.data("haslogic"))&&l(n)){var c=[];t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,d=e.element,s=e.operator,l=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=d!=n?o.find(".cpf_hide_element").eq(d):o):r=d!=n?i.find(".cpf_hide_element").eq(d):o,c.push({element:r,operator:s,value:l})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",c),r.cpfdependson(c,n.toggle,n.what))}})}function _(t,e,a,i){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=(e.attr("data-base-tax-rate"),e.attr("data-prices-include-tax")),c=e.attr("data-is-vat-exempt"),d=e.attr("data-non-base-location-prices"),s=e.attr("data-taxes-of-one"),l=e.attr("data-base-taxes-of-one"),p=e.attr("data-modded-taxes-of-one");if(void 0!==e.data("current_variation")){var m=e.data("current_variation");o=m.tc_is_taxable,r=m.tc_tax_rate,m.tc_base_tax_rate,d=m.tc_non_base_location_prices,s=m.tc_taxes_of_one,l=m.tc_base_taxes_of_one,p=m.tc_modded_taxes_of_one}a&&a.data("tax-obj")&&("no"===(r=a.data("tax-obj")).has_fee?o=!1:"yes"===r.has_fee&&(o=!0),r=r.tax_rate),o&&("1"!=n||i?t=parseFloat(t)*(1+r/100):"1"==c?t="1"==d?parseFloat(t)-s*t:parseFloat(t)-l*t:"1"==d&&(t=parseFloat(t)-l*t+p*t))}return t/=1e4}function f(t,e,a,i){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-base-taxes-of-one"),c=e.attr("data-prices-include-tax");if(void 0!==e.data("current_variation")){var d=e.data("current_variation");o=d.tc_is_taxable,r=d.tc_tax_rate,n=d.tc_base_taxes_of_one}a&&a.data("tax-obj")&&("no"===(r=a.data("tax-obj")).has_fee?o=!1:"yes"===r.has_fee&&(o=!0),r=r.tax_rate),(o&&"1"==c||i)&&(t=parseFloat(t)-parseFloat(n*t))}return t/=1e4}function u(t,e,a){return isNaN(parseFloat(t))&&(t=0),e&&(t="incl"==e.attr("data-tax-display-mode")?_(t,e,a):f(t,e,a)),t}function g(t,e,a){if(e){var i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),n=e.attr("data-prices-include-tax");i&&("excl"==r||"1"==n||(t=parseFloat(t)/(1+o/100)))}return t}function h(t,e,a,i,o){a||(t=u(t,e,o));var r="";e&&i&&(r=e.attr("data-tax-string")),void 0===r&&(r="");var n=Math.abs(t),c="minus"==tm_epo_js.tm_epo_global_options_price_sign?"":tm_epo_js.plus_sign+" ";return t<0&&(c=tm_epo_js.minus_sign+" "),b(n,c,r)}function v(t,e,a,i,o){a||(t=u(t,e,o));var r="";e&&i&&(r=e.attr("data-tax-string")),void 0===r&&(r="");var n=Math.abs(t),c="";return t<0&&(c=tm_epo_js.minus_sign+" "),b(n,c,r)}function b(t,e,a){return e+accounting.formatMoney(t,{symbol:tm_epo_js.currency_format_symbol,decimal:D,thousand:I,precision:tm_epo_js.currency_format_num_decimals,format:tm_epo_js.currency_format})+a}function y(e,a,i,o,r){var n=t(e);if(0!==n.length){isNaN(parseFloat(o))&&(o=0),isNaN(parseFloat(a))&&(a=0);var c=n.closest(".tmcp-field-wrap"),d=c.find(".before-amount,.after-amount"),s={price:i,original_price:r};if("yes"==tm_epo_js.tm_epo_auto_hide_price_if_zero&&!1===t.tmempty(a)||"yes"!=tm_epo_js.tm_epo_auto_hide_price_if_zero){var l=c.find(".tm-epo-field");l.length>0&&l.is(".tmcp-select")&&!l.children("option:selected").data("price")?(n.empty(),d.addClass("tm-hidden")):(o&&void 0!==o&&parseFloat(o)!==parseFloat(a)?(console.log("test"),console.log(parseFloat(o)),console.log(parseFloat(a)),n.html(t.fn.tm_template(K.sale_price,{price:s}))):n.html(t.fn.tm_template(K.price,{price:s})),d.removeClass("tm-hidden"))}else n.empty(),d.addClass("tm-hidden")}}function w(t,e,a){A[A.length]={name:t,selector:e,func:a}}function k(e){var a={};return e.find(".variations select").each(function(){var e,i;e=void 0!==t(this).data("attribute_name")?t(this).data("attribute_name"):t(this).attr("name"),i=t(this).val(),a[e]=i}),a}function x(e,a){var i=[];if(e.find(".cpf-type-variations").each(function(o,r){i[o]=!0;var n,c,d=t(r).find(".tm-epo-variation-element"),s=!1;d.is("select")?(n=d.attr("data-tm-for-variation").tmjid(),(c=d.val())&&(i[o]=!1),d.children("option").each(function(a,i){s=!1,e.find("#"+n).children("option").each(function(){if(t(this).attr("value")==t(i).attr("value"))return s=!0,!1}),s?t(i).removeAttr("disabled").show():t(i).attr("disabled","disabled").hide()})):d.each(function(r,d){var s=(d=t(d)).closest("li"),l=s.find(".tm-epo-variation-element");n=d.attr("data-tm-for-variation"),c=d.val(),d.is(":checked")&&(i[o]=!1);var p=k(e);p["attribute_"+n]=c;var m=t.fn.tm_find_matching_variations(a,p).shift(),_=m&&"is_in_stock"in m&&m.is_in_stock;m&&_?(d.removeAttr("disabled").removeClass("tm-disabled"),s.removeClass("tm-attribute-disabled").fadeTo("fast",1,function(){t(this).css("opacity","")}),l.removeAttr("disabled"),l.removeAttr("data-tm-disabled")):(d.attr("disabled","disabled").addClass("tm-disabled"),l.attr("disabled","disabled"),l.attr("data-tm-disabled","disabled"),s.addClass("tm-attribute-disabled").fadeTo("fast",.5),_||s.find("label").off())})}),i){i.shift();var o=!0;t.each(i,function(t,e){if(!1===e)return o=!1,!1}),o&&e.find(".cpf-type-variations").first().each(function(e,a){var i=t(a).find(".tm-epo-variation-element");i.is("select")||i.each(function(e,a){var i=(a=t(a)).closest("li"),o=i.find(".tm-epo-variation-element");a.removeAttr("disabled").removeClass("tm-disabled"),i.removeClass("tm-attribute-disabled").stop().css("opacity",""),o.removeAttr("disabled"),o.removeAttr("data-tm-disabled")})})}}function j(e){var a=e.data("product_variations"),i=parseInt(e.data("product_id"));if(i||(i=e.data("tc_product_id")),!a&&window.product_variations&&window.product_variations.product_id&&(a=window.product_variations.product_id),!a&&window.product_variations&&(a=window.product_variations),!a&&window["product_variations_"+i]&&(a=window["product_variations_"+i]),a)x(e,a);else if(S)x(e,S.variations);else{var o={action:"woocommerce_tm_get_variations_array",post_id:i};t.post(tm_epo_js.ajax_url,o,function(t){x(e,(S=t).variations)},"json")}}function F(e,a){if(void 0===a)return!1;var i=(e=t(e)).find(".tm-epo-variation-element"),o=i.closest(".tm-epo-variation-section");return i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+a+"</div>"),!0):(e.find(".tm-stock").remove(),e.find(".variations").after('<div class="tm-stock">'+a+"</div>"),!0)}function q(t,e){if("no"!=tm_epo_js.tm_epo_global_move_out_of_stock){var a=t.find(".woocommerce-variation-availability").last();a.length||(a=t.find(".stock").last()),a.length?(e.find(".tm-stock").remove(),F(e,a.prop("outerHTML"))&&a.remove()):e.find(".tm-stock").remove()}}function C(o,r,c,d){function s(e){e||(e=Wt),e.find(".tm-range-picker").each(function(a,i){var o=(i=t(i)).attr("data-step").split("."),r=e.find("#"+i.attr("data-field-id").tmjid()),n=parseFloat(i.attr("data-min")),c=parseFloat(i.attr("data-max")),d=parseFloat(i.attr("data-start")),s=parseFloat(i.attr("data-step")),l=i.attr("data-show-picker-value"),p=i.closest("li").find(".tm-show-picker-value"),m=parseFloat(i.attr("data-noofpips")),_=null;o=1==o.length?0:o[1].length,isNaN(n)&&(n=0),isNaN(c)&&(c=0),c<=n&&c++,isNaN(d)&&(d=0),isNaN(s)&&(s=0),isNaN(m)&&(m=10),"yes"==i.attr("data-pips")&&(_={mode:"count",values:m,density:2,filter:function(t,e){return s<=0?0:t%1?2:1},stepped:!0,format:wNumb({decimals:o})}),noUiSlider.create(i.get(0),{direction:tm_epo_js.text_direction,start:d,step:s,connect:"lower",behaviour:"tap",format:wNumb({mark:".",decimals:o,thousand:""}),range:{min:[n],max:[c]},pips:_});var f=i.find(".noUi-handle-lower");i.get(0).noUiSlider.on("slide",function(){f.trigger("tmmovetooltip"),r.trigger("change.cpf")}),i.get(0).noUiSlider.on("update",function(t,e){e=0,"left"!=l&&"right"!=l&&f.attr("title",accounting.formatNumber(t[e],{decimal:D,thousand:I,precision:o})),r.val(t[e]).change(),""!==l&&p.html(accounting.formatNumber(t[e],{decimal:D,thousand:I,precision:o}))}),"left"!=l&&"right"!=l&&(f.attr("title",i.attr("data-start")),t.tm_tooltip(f)),""!==l&&(d=accounting.formatNumber(d,{decimal:D,thousand:I,precision:o}),p.html(d))})}function l(e){function a(e,a){a=t(a);var i,o=t.tm_datepicker._getInst(a[0]),r=a.data("tc-enabled_only_dates"),n=a.data("tc-disabled_weekdays"),c=a.data("tc-disabled_dates"),d=a.data("tc-format"),s=e.getDay();return!!t.tm_datepicker._isInRange(o,e)&&(""!==r?(i=t.tm_datepicker.formatDate(d,e),-1!=r.indexOf(i)):-1==n.indexOf(s.toString())&&(""===c||(i=t.tm_datepicker.formatDate(d,e),-1==c.indexOf(i))))}if(t.tm_datepicker){e||(e=Wt);var i=t("input").map(function(){return this.id}).get().join(" ");e.find(".tm-epo-timepicker").each(function(e,a){var o=t(a),r=""!==o.attr("data-min-time").trim()?o.attr("data-min-time").trim():null,n=""!==o.attr("data-max-time").trim()?o.attr("data-max-time").trim():null,c=o.attr("data-time-format").trim(),d=o.attr("data-time-theme").trim(),s=o.attr("data-time-theme-size").trim(),l=o.attr("data-time-theme-position").trim(),p=o.attr("data-tranlation-hour").trim(),m=o.attr("data-tranlation-minute").trim(),_=o.attr("data-tranlation-second").trim();""!==o.attr("data-custom-time-format").trim()&&(c=o.attr("data-custom-time-format").trim()),p||(p=tm_epo_js.hourText),m||(m=tm_epo_js.minuteText),_||(_=tm_epo_js.secondText),o.tm_timepicker({isRTL:tm_epo_js.isRTL,hourText:p,minuteText:m,secondText:_,timeFormat:c,minTime:r,maxTime:n,closeText:tm_epo_js.closeText,showOn:"both",buttonText:"",beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+d+" tm-timepicker tm-datepicker tm-datepicker-"+l+" tm-datepicker-"+s).appendTo("body"),Q.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){o.tm_timepicker("hide")}),t("body").addClass("tm-static"),o.prop("readonly",!0),Y.trigger({type:"tm-timepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),o.prop("readonly",!1),o.trigger("change")}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tm-epo-datepicker").each(function(a,o){var r=t(o),n=parseInt(r.attr("data-start-year").trim()),c=parseInt(r.attr("data-end-year").trim()),d=r.attr("data-min-date").trim(),s=r.attr("data-max-date").trim(),l=r.attr("data-disabled-dates").trim(),p=r.attr("data-enabled-only-dates").trim(),m=r.attr("data-disabled-weekdays").trim().split(","),_=r.attr("data-date-format").trim(),f=r.attr("data-date-showon").trim(),u=r.attr("data-date-defaultdate").trim(),g=r.attr("data-date-theme").trim(),h=r.attr("data-date-theme-size").trim(),v=r.attr("data-date-theme-position").trim();if(""!==l){var b=l.split(",");-1!=l.indexOf(",")&&b.length>0&&(l=b)}if(""!==p){var y=p.split(",");-1!=p.indexOf(",")&&y.length>0&&(p=y)}d=""===d?""===n?null:new Date(n,0,1):d.tm_isNumeric()||isNaN(new Date(d).getTime())?d:new Date(d),s=""===s?""===c?null:new Date(c,11,31):s.tm_isNumeric()||isNaN(new Date(s).getTime())?s:new Date(s),r.data("tc-enabled_only_dates",p),r.data("tc-disabled_weekdays",m),r.data("tc-disabled_dates",l),r.data("tc-format",_),r.tm_datepicker({monthNames:tm_epo_js.monthNames,monthNamesShort:tm_epo_js.monthNamesShort,dayNames:tm_epo_js.dayNames,dayNamesShort:tm_epo_js.dayNamesShort,dayNamesMin:tm_epo_js.dayNamesMin,isRTL:tm_epo_js.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:f,defaultDate:u,buttonText:"",showButtonPanel:!0,firstDay:tm_epo_js.first_day,closeText:tm_epo_js.closeText,currentText:tm_epo_js.currentText,dateFormat:_,minDate:d,maxDate:s,onSelect:function(a,i){var o=t(this),r="#"+o.attr("id").tmjid(),n=o.attr("data-date-format"),c=o.tm_datepicker("getDate"),d="",s="",_="",f=e.find(r+"_day"),u=e.find(r+"_month"),g=e.find(r+"_year");if(c){d=c.getDate(),s=c.getMonth()+1,_=c.getFullYear();var h=t.tm_datepicker.formatDate(n,c);if(-1!=m.indexOf(c.getDay().toString())||-1!=l.indexOf(h)||""!==p&&-1==p.indexOf(h)){var v=o.data("tm-last-date");v=o.data("tm-last-date")?o.data("tm-last-date"):"",o.val(v),o.tm_datepicker("setDate",v),v?(d=(c=o.tm_datepicker("getDate")).getDate(),s=c.getMonth()+1,_=c.getFullYear()):(d="",s="",_="")}}f.val(d),u.val(s),g.val(_),o.data("tm-last-date",o.val())},beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+g+" tm-datepicker tm-datepicker-"+v+" tm-datepicker-"+h).appendTo("body"),Q.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){r.tm_datepicker("hide")}),t("body").addClass("tm-static"),r.prop("readonly",!0),Y.trigger({type:"tm-datepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),r.prop("readonly",!1),r.removeAttr("readonly"),r.trigger("change")},beforeShowDay:function(e){var a,i=e.getDay();return""!==p?(a=t.tm_datepicker.formatDate(_,e),[-1!=p.indexOf(a),""]):-1!=m.indexOf(i.toString())?[!1,""]:""!==l?(a=t.tm_datepicker.formatDate(_,e),[-1==l.indexOf(a),""]):[!0,""]}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tmcp-date-select").on("change.cpf",function(a){var i="#"+t(this).attr("data-tm-date").tmjid(),o=e.find(i),r=o.attr("data-date-format"),n=e.find(i+"_day").val(),c=e.find(i+"_month").val(),d=e.find(i+"_year").val(),s=t.tm_datepicker.formatDate(r,new Date(d,c-1,n));n>0&&c>0&&d>0?(o.tm_datepicker("setDate",s),o.trigger("change")):(o.val(""),o.trigger("change.cpf"))}).on("focus.cpf",function(i){var o="#"+t(this).attr("data-tm-date").tmjid(),r=e.find(o),n=e.find(o+"_day"),c=e.find(o+"_month"),d=e.find(o+"_year"),s=n.val(),l=c.val(),p=d.val();if(""!==p&&""!==l&&""!==s||""!==p&&""!==l&&""===s||""!==s&&""!==p&&""===l||""!==s&&""!==l&&""===p){var m=t(this);m.find("option").each(function(){var e=t(this),i=e.val(),o=p+"-"+l+"-"+s;if(m.is(".tmcp-date-day")){if(""===p||""===l)return;o=p+"-"+l+"-"+i}else if(m.is(".tmcp-date-month")){if(""===p||""===s)return;o=p+"-"+i+"-"+s}else if(m.is(".tmcp-date-year")){if(""===s||""===l)return;o=i+"-"+l+"-"+s}if(""!==i)try{var n=t.tm_datepicker.parseDate("yy-mm-dd",o);n&&(a(n,r)?e.prop("disabled",!1):e.prop("disabled",!0))}catch(t){e.prop("disabled",!0)}})}else n.find("option").prop("disabled",!1),c.find("option").prop("disabled",!1),d.find("option").prop("disabled",!1)}),t(window).on("resizestart",function(){var e=t(document.activeElement);if(e.is(".hasDatepicker")){if(e.data("resizestarted",!0),t(window).width()<768)return void e.data("resizewidth",!0);e.tm_datepicker("hide")}}),t(window).on("resizestop",function(){var e=t(document.activeElement);e.is(".hasDatepicker")&&e.data("resizestarted")&&(e.data("resizewidth")&&e.tm_datepicker("hide"),e.tm_datepicker("show")),e.data("resizestarted",!1),e.data("resizewidth",!1)})}}function b(e){if("yes"==tm_epo_js.tm_epo_global_enable_validation){var a={};return Wt.find(".tmcp-ul-wrap").each(function(e,i){var o=(i=t(i)).data("tm-validation");if(o&&"object"===t.tmType(o)){var r=i.find(".tm-epo-field"),n=r.first().attr("name");i.is(".tm-extra-product-options-radio.tm-element-ul-radio")&&(n=r.last().attr("name")),i.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?r.each(function(e,n){"required"in o&&(o.required=function(e){var a=i.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===a?r.last().attr("name")==t(e).attr("name"):a<=0}),a[t(n).attr("name")]=o}):a[n]=o}}),e.removeData("tc_validator"),e.tc_validate({focusInvalid:!1,ignore:Z+",#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:a,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return e.is(".tm-epo-field.tmcp-radio")||e.is(".tm-epo-field.tmcp-checkbox")||e.is(".tm-epo-field.tmcp-radio")?t.appendTo(e.closest(".tmcp-ul-wrap").parent()):t.appendTo(e.closest(".tmcp-field-wrap")),!1},invalidHandler:function(e,a){setTimeout(function(){o.find(H).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),a.errorList&&a.errorList[0]&&a.errorList[0].element&&et(t(a.errorList[0].element))},submitHandler:function(t){return o.find(H).first().addClass("disabled"),w()}}),!0}return!1}function w(e){var a,i,r=!0;for(i=0;i<Et.length;i++)if(a=Et[i],!("object"!=typeof a||"function"!=typeof a.trigger||a.trigger())){r=!1;break}for(i=0;i<Et.length;i++)"object"==typeof(a=Et[i])&&(r?a.on_true():a.on_false());return r||setTimeout(function(){o.find(H).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),r}function k(t,e,a){return x(t,e,a)}function x(t,e,a){return e||(e="form"),F(t,a).closest(e)}function F(t,e){var a="";e&&(a=a+'[value="'+e+'"]'),t||(t=o);var i=t.find(R+a);return 0===i.length&&(i=t.find(U+a)),i.last()}function C(){var e=x(),a=e.find(".wc-bookings-booking-form"),i=a.find("input, select").first(),o=a.find(".tm-epo-counter"),r=St.find(".tm-epo-counter");if(i.length>0&&a.length>0&&r.length>0){e.on("submit",function(){e.find(H).first().addClass("disabled")}),$t.data("tc_is_bookings",1),$t.data("bookings_form",a),$t.data("bookings_form_init",0),$t.data("price",0),Xt.find(".cpf-product-price").val(0);var n=$t.attr("data-tm-epo-final-total-box"),s="hide"==n||"disable"==n||"disable_change"==n;s||t.ajaxPrefilter(function(e,a,i){if("post"===e.type.toLowerCase()&&a.data&&a.data.action&&"wc_bookings_calculate_costs"==a.data.action&&a.data.form){var o=a.data.form.tmparseParams(!0);o=t.extend(o,{tc_suppress_filter_booking_cost:1}),a.data.form=t.param(o,!1),e.data=t.param(t.extend(a.data,{}),!1)}}),Q.ajaxSuccess(function(e,a,i){if(i.data&&a&&a.responseText){var o=i.data.tmparseParams();if(o.action&&"wc_bookings_calculate_costs"==o.action){var r=t.parseJSON(a.responseText);if(r.html)if(r&&"SUCCESS"==r.result){var n=parseFloat(t("<div>"+r.html+"</div>").find(".amount").text().tmunformat());if(!isNaN(n)){if(s){var c=$t.data("tc_totals_ob").options_total_price;n=parseFloat(n)-parseFloat(c)}$t.data("price",n),Xt.find(".cpf-product-price").val(n),$t.data("bookings_form_init",1),St.trigger({type:"tm-epo-update"})}}else r&&"ERROR"==r.result&&$t.data("bookings_form_init",0)}o.action&&"wc_bookings_get_blocks"==o.action&&($t.data("price",0),Xt.find(".cpf-product-price").val(0),St.trigger({type:"tm-epo-update",product_false:!0}))}}),s&&0==o.length&&Wt.find(".tm-epo-field").not(".tm-epo-counter").off("change.tcbookings").on("change.tcbookings",function(t){setTimeout(function(){i.trigger("change")},100)})}s&&!At&&i.length>0&&(Wt.find(".tm-epo-field").not(".tm-epo-counter").off("change.tcbookings").on("change.tcbookings",function(t){setTimeout(function(){i.trigger("change")},100)}),t.ajaxPrefilter(function(e,a,i){if("post"===e.type.toLowerCase()&&a.data&&a.data.action&&"wc_bookings_calculate_costs"==a.data.action&&a.data.form){var o=t(P+".tm-cart-main.tm-product-id-"+c+'[data-epo-id="'+d+'"]');if(1==o.length){var r=a.data.form.tmparseParams(!0);r=t.extend(r,o.tm_aserializeObject()),a.data.form=t.param(r,!1),e.data=t.param(t.extend(a.data,{}),!1)}}}))}function z(){if(Lt&&"yes"==tm_epo_js.tm_epo_hide_add_cart_button){var t=o.find(H).first();Pt?t.removeClass("tc-hide-add-to-cart-button"):t.addClass("tc-hide-add-to-cart-button")}}function N(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return!(o>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");e.length>0?((i=parseInt(e.val()))<=0&&(i=1),r+=i):r+=1}),r>o))||(a&&e.prop("checked","").trigger("change"),!1)}function T(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return!((o=parseInt(e.attr("data-exactlimit")))>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");e.length>0?((i=parseInt(e.val()))<=0&&(i=1),r+=i):r+=1}),r>o)&&(a&&e.prop("checked","").trigger("change"),1))}function S(a){var i=!0,r=!1;return a.each(function(){var a=t(this).find("[type='checkbox'][data-exactlimit]");if(a.length&&e(a)){var n=parseInt(a.attr("data-exactlimit")),c=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?((e=parseInt(a.val()))<=0&&(e=1),c+=e):c+=1});var d=t(this).closest(".cpf_hide_element").find("div.tm-error-min");if(n!==c){i=!1,r=t(this);var s=tm_epo_js.tm_epo_global_validator_messages.epoexact.replace("{0}",n);d.length&&d.remove(),t(this).after('<div class="tm-error-min tm-error">'+s+"</div>"),o.find(H).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled")}else d.remove()}}),r&&(Mt=r),i}function O(e){Et[Et.length]={trigger:function(){return S(e)},on_true:function(){return!0},on_false:function(){return et(t(e).find(".tm-epo-field").first()),!0}}}function V(a){var i=!0,o=!1;return a.each(function(){var a=t(this).find("[type='checkbox'][data-minimumlimit]");if(a.length&&e(a)){var r=parseInt(a.attr("data-minimumlimit")),n=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this).closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?((e=parseInt(a.val()))<=0&&(e=1),n+=e):n+=1});var c=t(this).closest(".cpf_hide_element").find("div.tm-error-min");if(r>n){i=!1,o=t(this);var d=tm_epo_js.tm_epo_global_validator_messages.epomin.replace("{0}",r);c.length&&c.remove(),t(this).after('<div class="tm-error-min tm-error">'+d+"</div>")}else c.remove()}}),o&&(Mt=o),i}function tt(t){Et[Et.length]={trigger:function(){return V(t)},on_true:function(){return!0},on_false:function(){return et(),!0}}}function et(e){var a=Mt||e;if(a){if("yes"!==tm_epo_js.tm_epo_disable_error_scroll){var i=a.closest(".cpf-section"),o=i.find(".tm-section-link"),r=a.closest(".cpf_hide_element");if(i.find(".tm-toggle").length&&i.find(".tm-toggle").trigger("openwrap.tmtoggle"),window.tc_validation_offset||(window.tc_validation_offset=-100),i.is(".section_popup"))t(window).tc_scrollTo(o,300,window.tc_validation_offset),o.trigger("click.tmsectionpoplink");else if(i.is(".tm-owl-slider-section")){var n=a.closest(".owl-item").index();i.find(".tcowl-carousel").trigger("to.owl.carousel",[n,100]),setTimeout(function(){i.find(".tcowl-carousel").trigger("refresh.owl.carousel"),r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset)},200)}else r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset)}e||(Mt=!1)}}function at(){$t.each(function(){var e=t(this).attr("data-cart-id"),a=o.find(".tm-extra-product-options.tm-cart-"+e),i=t(this).data("subscription-period"),r=t(this).data("variations-subscription-period"),n=a.find(".tmcp-field").closest(".tmcp-field-wrap");if(t(this).data("is-subscription")){n.find(".tmperiod").remove();var c=n.find(".amount").is(".hidden");c=c?" hidden":"";var d='input[name^="variation_id"]',s=t(this).data("tm_for_cart");if(s){s.find("input.variation_id").length>0&&(d="input.variation_id");var l=s.find(d).val();l||(l=0),r[l.tmtoFloat()]&&(i=r[l.tmtoFloat()])}void 0===window.subscription_period_separator&&(window.subscription_period_separator=" / "),n.find(".amount").after('<span class="tmperiod'+c+'">'+window.subscription_period_separator+i+"</span>"),t(this).find(".tmperiod").remove(),t(this).find(".amount.options").after('<span class="tmperiod">'+window.subscription_period_separator+i+"</span>"),t(this).find(".amount.final").after('<span class="tmperiod">'+window.subscription_period_separator+i+"</span>")}})}function it(e){var a=e.attr("data-container-id");return a||(a=t(e).closest(".composite_form").find(".composite_data").data("container_id")),a}function ot(t){return o.find(".bto_form_"+t+",#composite_form_"+t+",#composite_data_"+t).data("price_data")}function rt(t){return" .review .price_"+t+", .summary_element_"+t+" .summary_element_price"}function nt(t){return t.attr("data-item-id")||t.attr("data-item_id")}function ct(e,a,i,o){return"object"==typeof e&&(e=e[0],isNaN(parseFloat(e))&&(e=0)),t.tc_apply_filters("tc_apply_dpd",e,a,i,o)}function dt(e){return t.tc_apply_filters("tc_calculate_product_price",parseFloat(e.data("price")),e)}function st(e,a,i){var r,n,c,d,s,l,p,m,_=t(e),f=_,g=!0,v=_.is(".tmcp-range");if(a)r=a.bto,n=a.cart,c=a.current_variation,d=a.is_bto,s=a.bundleid,l=a.totals,m=a.product_price,p=a.apply_dpd;else{r=_.closest(W);var b='input[name^="variation_id"]';(n=_.closest(".cart")).find("input.variation_id").length>0&&(b="input.variation_id"),c=n.find(b).val(),d=r.length>0,(s=n.attr("data-product_id"))||(s=n.closest(".component_content").attr("data-product_id"))||(s=0),c||(c=0),m=dt(l=d?o.find(".tm-epo-totals.tm-cart-"+s):$t),p=l.data("fields-price-rules")}_.is("select")&&(f=_.find("option:selected")),i&&(f=i);var w,k,x,j,F,q,C,z,N,T,D,I=f.data("rules"),S=f.data("rulestype"),A=f.data("original-rules");if(void 0===A&&(A=I),d){var O=n.find(".cpf-bto-price");O.length>0&&(O.data("per_product_pricing")?m=O.val():(m=0,g=!1),O.val(m))}if(!1!==g)if(j="","object"==typeof I){switch(c in I?(F=I[c],q=A[c]):(w=_.closest(".tmcp-ul-wrap").data("rules"),x=_.closest(".tmcp-ul-wrap").data("original-rules"),F="object"==typeof w&&c in w?w[c]:I[0],q="object"==typeof x&&c in x?x[c]:A[0]),"object"==typeof S?j=c in S?S[c]:"object"==typeof(k=_.closest(".tmcp-ul-wrap").data("rulestype"))&&c in k?k[c]:S[0]:"object"==typeof(S=_.closest(".tmcp-ul-wrap").data("rulestype"))&&(j=c in S?S[c]:S[0]),"object"==typeof j&&(j=j[0]),_.is(".tmcp-fee-field")&&-1===t.inArray(j,["fee","stepfee","stepfee"])&&(j="fee"),_.is("select")?_.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(f.removeData("tm-price-for-late"),f.removeData("islate"),f.removeClass("tm-epo-late-field")),"fee"==j&&(p=0),j){case"":F=ct(F,l,p),q=ct(q,l,p);break;case"fee":F=F,q=q;break;case"percent":F=F/100*m,q=q/100*m;break;case"percentcurrenttotal":Gt.push({setter:f,price:F,bundleid:s}),f.data("tm-price-for-late",F).data("islate",1).addClass("tm-epo-late-field"),F=0,q=0;break;case"char":F=ct(F,l,p)*f.val().length,q=ct(q,l,p)*f.val().length;break;case"charpercent":F=F/100*m*f.val().length,q=q/100*m*f.val().length;break;case"charnospaces":F=ct(F,l,p)*f.val().replace(/\s/g,"").length,q=ct(q,l,p)*f.val().replace(/\s/g,"").length;break;case"charnofirst":(N=f.val().length-1)<0&&(N=0),F=ct(F,l,p)*N,q=ct(q,l,p)*N;break;case"charnon":T=parseInt(f.attr("data-freechars")),isNaN(T)&&(T=0),(N=f.val().length-T)<0&&(N=0),F=ct(F,l,p)*N,q=ct(q,l,p)*N;break;case"charpercentnon":T=parseInt(f.attr("data-freechars")),isNaN(T)&&(T=0),(N=f.val().length-T)<0&&(N=0),F=F/100*m*N,q=q/100*m*N;break;case"charnonnospaces":T=parseInt(f.attr("data-freechars")),isNaN(T)&&(T=0),(N=f.val().replace(/\s/g,"").length-T)<0&&(N=0),F=ct(F,l,p)*N,q=ct(q,l,p)*N;break;case"charpercentnonnospaces":T=parseInt(f.attr("data-freechars")),isNaN(T)&&(T=0),(N=f.val().replace(/\s/g,"").length-T)<0&&(N=0),F=F/100*m*N,q=q/100*m*N;break;case"charpercentnofirst":(N=f.val().length-1)<0&&(N=0),F=F/100*m*N,q=q/100*m*N;break;case"step":v?(F=ct(F,l,p)*f.val(),q=ct(q,l,p)*f.val().tmtoFloat()):(F=ct(F,l,p)*f.val().tmtoFloat(),q=ct(q,l,p)*f.val().tmtoFloat());break;case"stepfee":F*=f.val().tmtoFloat(),q*=f.val().tmtoFloat();break;case"currentstep":v?(F=ct(f.val(),l,p),q=ct(f.val(),l,p)):(F=ct(f.val().tmtoFloat(),l,p),q=ct(f.val().tmtoFloat(),l,p));break;case"currentstepfee":v?(F=f.val(),q=f.val().tmtoFloat()):(F=f.val().tmtoFloat(),q=f.val().tmtoFloat());break;case"intervalstep":v&&(D=parseFloat(t('.tm-range-picker[data-field-id="'+f.attr("id")+'"]').attr("data-min")),F=ct(F,l,p)*(f.val()-D),q=ct(q,l,p)*(f.val()-D));break;case"row":F=ct(F,l,p)*((f.val().match(new RegExp("\n","g"))||[]).length+1),q=ct(q,l,p)*((f.val().match(new RegExp("\n","g"))||[]).length+1)}_.data("tm-quantity")&&(F*=parseFloat(_.data("tm-quantity")),q*=parseFloat(_.data("tm-quantity"))),C=h(F,l,!1,!1,f),z=h(q,l,!1,!1,f),f.data("price",u(F,l,f)),f.data("original_price",u(q,l,f)),i||y(f.closest(".tmcp-field-wrap").find(".tc-price"),F,C,q,z)}else{var E=_.closest(".tmcp-ul-wrap");if(I=E.data("rules"),A=E.data("original-rules"),"object"==typeof I){switch(F=c in I?I[c]:I[0],q="object"==typeof A?c in A?A[c]:A[0]:F,"object"==typeof S?j=c in S?S[c]:"object"==typeof(k=E.data("rulestype"))&&c in k?k[c]:S[0]:"object"==typeof(S=E.data("rulestype"))&&(j=c in S?S[c]:S[0]),"object"==typeof j&&(j=j[0]),_.is(".tmcp-fee-field")&&-1===t.inArray(j,["fee","stepfee","stepfee"])&&(j="fee"),_.is("select")?_.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(f.removeData("tm-price-for-late"),f.removeData("islate"),f.removeClass("tm-epo-late-field")),j){case"":F=ct(F,l,p),q=ct(q,l,p);break;case"fee":F=F,q=q;break;case"percent":F=F/100*m,q=q/100*m;break;case"percentcurrenttotal":Gt.push({setter:f,price:F,bundleid:s}),f.data("tm-price-for-late",F).data("islate",1).addClass("tm-epo-late-field"),F=0,q=0;break;case"char":F=ct(F,l,p)*f.val().length,q=ct(q,l,p)*f.val().length;break;case"charpercent":F=F/100*m*f.val().length,q=q/100*m*f.val().length;break;case"step":v?(F=ct(F,l,p)*f.val(),q=ct(q,l,p)*f.val()):(F=ct(F,l,p)*f.val().tmtoFloat(),q=ct(q,l,p)*f.val().tmtoFloat());break;case"stepfee":v?(F*=f.val(),q*=f.val()):(F*=f.val().tmtoFloat(),q*=f.val().tmtoFloat());break;case"currentstep":v?(F=ct(f.val(),l,p),q=ct(f.val(),l,p)):(F=ct(f.val().tmtoFloat(),l,p),q=ct(f.val().tmtoFloat(),l,p));break;case"currentstepfee":v?(F=f.val(),q=f.val()):(F=f.val().tmtoFloat(),q=f.val().tmtoFloat());break;case"intervalstep":v&&(D=parseFloat(t('.tm-range-picker[data-field-id="'+f.attr("id")+'"]').attr("data-min")),F=ct(F,l,p)*(f.val()-D),q=ct(q,l,p)*(f.val()-D))}_.data("tm-quantity")&&(F*=parseFloat(_.data("tm-quantity")),q*=parseFloat(_.data("tm-quantity"))),C=h(F,l,!1,!1,f),z=h(q,l,!1,!1,f),f.data("price",u(F,l,f)),f.data("original_price",u(q,l,f)),i&&y(f.closest(".tmcp-field-wrap").find(".tc-price"),F,C,q,z)}}}function lt(i){Gt=[];var r;(r=i||o.find(".cart")).length<=0||r.each(function(i,r){var n='input[name^="variation_id"]';(r=t(r)).find("input.variation_id").length>0&&(n="input.variation_id");var c=!0,d=t(this).closest(W),s=r.find(n).val(),l=!1,p=r.attr("data-product_id");if(p||(p=r.closest(".component_content").attr("data-product_id"))||(p=0),d.length>0){l=!0;var m=ot(it(d));m&&(c=a(m))}s||(s=0);var _,f;l?(_=o.find(".tm-extra-product-options.tm-cart-"+p),f=o.find(".tm-epo-totals.tm-cart-"+p)):(_=Wt,f=$t);var g=f.data("fields-price-rules");if(_.data("tm_rules_init_done")||(f.data("force-quantity")&&r.find(Z).val(f.data("force-quantity")),_.find(".tm-quantity .tm-qty").each(function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",e.val())}),_.find(".tmcp-attributes, .tmcp-elements").each(function(e,a){var i=(a=t(a)).data("rules"),o=a.data("original-rules");if("object"!=typeof i&&(i={0:"0"}),"object"!=typeof o&&(o={0:"0"}),"object"==typeof i){var r=ct(i[s.tmtoFloat()],f,g),n=h(r,f),d=ct(o[s.tmtoFloat()],f,g),l=h(d,f);a.find(".tmcp-field").each(function(e,a){var i=t(a);c?(i.data("price",u(r,f,i)),i.data("original_price",u(d,f,i)),y(i.closest(".tmcp-field-wrap").find(".tc-price"),r,n,d,l)):(i.data("price",0),i.data("original_price",0),i.closest(".tmcp-field-wrap").find(".amount").empty())})}}),_.data("tm_rules_init_done",1)),!c)return!0;var v;f.length&&(v=dt(f));var b={bto:d,cart:r,current_variation:s,is_bto:l,bundleid:p,totals:f,product_price:v,apply_dpd:g},w=_.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field"),k=w.filter(".tcenabled");(!It||0==k.length&&w.length>0)&&(w.each(function(){e(t(this))}),It=!0),w.filter(".tcenabled").each(function(t,e){st(e,b)}),w.each(function(e,a){t(a).on("tc_element_epo_rules",function(){st(a,b)})})})}function pt(e){return t(e).find(".single_variation .price,.bundle_price .price,.bto_item_wrap .price,.component_wrap .price,.composite_wrap .price").not(".tc-price")}function mt(e,a){function i(e,a){l.data("current_variation",a);var i,o=t(this),r=l.data("variations"),n=l.data("variations-subscription-sign-up-fee"),c=l.data("variations-subscription-period");r&&a&&a.variation_id&&(n[a.variation_id]?l.data("subscription-sign-up-fee",n[a.variation_id]):l.data("subscription-sign-up-fee","")),r&&a&&a.variation_id&&(c[a.variation_id]?l.data("subscription-period",c[a.variation_id]):l.data("subscription-period","")),r&&a&&a.variation_id&&void 0!==r[a.variation_id]?(i=r[a.variation_id],l.data("price",i),l.removeData("tcprice")):a&&"display_price"in a?(i=a.display_price,l.data("price",i),l.removeData("tcprice")):a&&t(a.price_html).find(".amount:last").length&&(i=(i=(i=(i=t(a.price_html).find(".amount:last").text()).replace(tm_epo_js.currency_format_thousand_sep,"")).replace(tm_epo_js.currency_format_decimal_sep,".")).replace(/[^0-9.]/g,""),i=parseFloat(i),l.data("price",i),l.removeData("tcprice")),s.find(".cpf-product-price").val(i),o.data("tm_variations_did_init",!0),o.data("tm-styled-variations")||p.trigger({type:"tm-epo-update"})}var r,n,s,l,p,m="main";e?(r=it(e),(m=nt(e))||(m=e.attr("data-item_id")),n=o.find(".tm-extra-product-options.tm-cart-"+m),s=o.find(".tm-totals-form-"+m),l=o.find(".tm-epo-totals.tm-cart-"+m)):(St&&0!==St.length||(St=Wt.is(".tc-shortcode")?o:k(o,"form",c)),e=St.parent(),n=Wt,s=Xt,l=$t),p=a||St,l.data("tm_for_cart",p);var g='input[name^="variation_id"]';p.find("input.variation_id").length>0&&(g="input.variation_id"),l.data("variation_id_selector",p.find(g).not(".wceb_picker_wrap "+g)),l.data("qty_element",p.find(Z).last());var b=l.data("type"),w=e.find(".variations_form");w.data("tc_product_id",c),n.find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(e){var a=t(this),i=a.attr("data-tm-for-variation").tmjid(),r=a.closest(".cpf-type-variations");a.closest(".cpf_hide_element").find(".tm-epo-variation-element").removeAttr("checked").prop("checked",!1),w.find("#"+i).val("").change(),w.find("#"+i).trigger("focusin"),o.find(".cpf-type-variations").not(r).each(function(e,a){w.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),w.trigger("woocommerce_update_variation_values_tmlogic")}),n.find("input.tm-epo-variation-element,input.tm-epo-variation-element + label").off("mouseup.cpfv").on("mouseup.cpfv",function(e){var a=t(this);a.is("label")&&(a=a.prev("input")),a.attr("disabled")&&w.find(".reset_variations").trigger("click");var i=a.attr("data-tm-for-variation").tmjid();w.find("#"+i).trigger("focusin")}),n.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(e){var a=t(this),i=a.attr("data-tm-for-variation").tmjid(),r=a.val(),n=a.closest(".cpf-type-variations"),c=w.find("#"+i);if(e&&e.type&&"tm_epo_variation_element_change"==e.type);else{var d=!1;c.each(function(){if(this.value==r)return d=!0,!1}),d||c.trigger("focusin"),c.val(r).change()}r||c.trigger("focusin"),o.find(".cpf-type-variations").not(n).each(function(e,a){w.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),w.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){if(t(this).is("select")){var e=t(this).attr("data-tm-for-variation").tmjid();w.find("#"+e).trigger("focusin"),w.trigger("woocommerce_update_variation_values_tmlogic")}}),n.find("select.tm-epo-field").off("tm-select-change-html").on("tm-select-change-html",function(){if(!a||!St||void 0===St.data("per_product_pricing")||St.data("per_product_pricing")){var e=t(this),i=h(e.find("option:selected").data("price"),l,!1,!1,e),o=h(e.find("option:selected").data("original_price"),l,!1,!1,e);y(e.closest(".tmcp-field-wrap").find(".tc-price"),e.find("option:selected").data("price"),i,e.find("option:selected").data("original_price"),o);var r=e.closest(".tmcp-field-wrap").find(".tc-tooltip");r.length>0&&r.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed");var n=e.closest(".tmcp-field-wrap").find(".tc-inline-description");if(n.length>0&&(e.find("option:selected").attr("data-tm-tooltip-html")?n.html(e.find("option:selected").attr("data-tm-tooltip-html")):n.html("")),("0"==e.find("option:selected").attr("data-hide-amount")||"yes"==tm_epo_js.tm_epo_show_price_inside_option_hidden_even)&&"yes"==tm_epo_js.tm_epo_show_price_inside_option&&e.find("option:selected").attr("data-text")&&("yes"==tm_epo_js.tm_epo_auto_hide_price_if_zero&&!1===t.tmempty(e.find("option:selected").data("price"))||"yes"!=tm_epo_js.tm_epo_auto_hide_price_if_zero&&""!==e.find("option:selected").attr("data-price"))){e.find("option:selected").html(e.find("option:selected").attr("data-text")+" ("+i+")")}""===e.val()?r.addClass("tm-hidden"):r.removeClass("tm-hidden")}}).off("tm-select-change-html-all").on("tm-select-change-html-all",function(){if(!a||!St||void 0===St.data("per_product_pricing")||St.data("per_product_pricing")){var e=t(this),i=e.closest(".tmcp-field-wrap").find(".tc-tooltip");i.length>0&&i.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed");var o=e.closest(".tmcp-field-wrap").find(".tc-inline-description");o.length>0&&(e.find("option:selected").attr("data-tm-tooltip-html")?o.html(e.find("option:selected").attr("data-tm-tooltip-html")):o.html("")),e.find("option").each(function(){var a=t(this);if(!a.val())return!0;st(e,void 0,a);var i=1;"yes"!=tm_epo_js.tm_epo_multiply_price_inside_option&&(i=e.data("tm-quantity")),i||(i=1);var o=h(a.data("price")/i,l,!1,!1,e);if(("0"==a.attr("data-hide-amount")||"yes"==tm_epo_js.tm_epo_show_price_inside_option_hidden_even)&&"yes"==tm_epo_js.tm_epo_show_price_inside_option&&a.attr("data-text")&&("yes"==tm_epo_js.tm_epo_auto_hide_price_if_zero&&!1===t.tmempty(a.data("price"))||"yes"!=tm_epo_js.tm_epo_auto_hide_price_if_zero&&""!==a.attr("data-price"))){a.html(a.attr("data-text")+" ("+o+")")}}),""===e.val()?i.addClass("tm-hidden"):i.removeClass("tm-hidden")}}).off("tm-select-change").on("tm-select-change",function(){a&&St&&void 0!==St.data("per_product_pricing")&&!St.data("per_product_pricing")||(t(this).trigger("tm-select-change-html"),t(this).trigger("tm-select-change-html-all"),p.trigger({type:"tm-epo-update",norules:1,element:t(this)}))}),n.find("select.tm-epo-field").trigger("tm-select-change-html"),n.off("focus.cpf",".tm-quantity .tm-qty").on("focus.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=N(a,!1),d=T(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?e.data("tm-prev-value",i):e.data("tm-prev-value",r)}).off("change.cpf",".tm-quantity .tm-qty").on("change.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=N(a,!1),d=T(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?(a.data("tm-quantity",e.val()).trigger("change.cpf"),a.trigger("tm-select-change-html-all")):e.data("tm-prev-value")?e.val(e.data("tm-prev-value")):e.val(r)}).off("tmaddquantity",".tm-quantity .tm-qty").on("tmaddquantity",".tm-quantity .tm-qty",function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",e.val())}),n.find(".tm-quantity .tm-qty").trigger("change.cpf"),n.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").each(function(){var e=t(this),a=t.fn.tm_template(K.tc_chars_remanining,{maxlength:e.attr("maxlength"),characters_remaining:tm_epo_js.i18n_characters_remaining});e.after(t(a))}),n.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").off("change.tc_maxlen keyup.tc_maxlen").on("change.tc_maxlen keyup.tc_maxlen",function(e){var a=t(this);a.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(a.attr("maxlength"))-parseInt(a.val().length))}),n.find(".tm-epo-field").off("tm_trigger_product_image").on("tm_trigger_product_image",function(e){var a=t(this),i=t(this);if(i.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")){var r=i.closest(".tmcp-field-wrap").find("label img"),c=i.closest(".cpf-section").is(".tm-epo-variation-section");if(i.is("select.tm-product-image")&&(a=i.children("option:selected")),t(r).length>0||c&&void 0!==a.attr("data-image")||void 0!==a.attr("data-image")&&""!==a.attr("data-image")||void 0!==a.attr("data-imagep")&&""!==a.attr("data-imagep"))if(i.is(":checked")||i.is("select.tm-product-image")&&""!==i.val()&&(""!==i.find("option:selected").attr("data-rules")||i.is(".tm-epo-variation-element"))){var d=t(r).first().attr("data-original");d||c||(d=t(r).first().attr("src")),d||(d=a.attr("data-image")),a.attr("data-imagep")&&(d=a.attr("data-imagep")),d?o.trigger("tm_change_product_image",{src:d,element:i,element_current:a,main_product:o,epo_holder:n}):o.trigger("tm_change_product_image",{src:!1,element:i,element_current:a,main_product:o,epo_holder:n})}else o.trigger("tm_restore_product_image",{element:i,element_current:a,main_product:o,epo_holder:n});else o.trigger("tm_restore_product_image",{element:i,element_current:a,main_product:o,epo_holder:n})}else o.trigger("tm_attempt_product_image",{element:i,element_current:a,main_product:o,epo_holder:n})}),n.find(".tm-quantity").off("showhide.cpfcustom").on("showhide.cpfcustom",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=!1;if(!i.is(".tm-epo-variation-element")){i.is("select")?""!==i.val()&&(o=!0):i.is(":checkbox")?i.is(":checked")&&(o=!0):i.is(":radio")?i.is(":checked")&&(o=!0,"yes"==tm_epo_js.tm_epo_show_only_active_quantities&&i.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio").each(function(){t(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()})):i.val()&&(o=!0);var r=a.find(".tm-qty"),n=r.val(),c=r.attr("min")||"";o?("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.show(),r.removeClass("ignore").prop("disabled",!1)):("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&(a.hide(),n||r.val(c)),r.addClass("ignore").prop("disabled",!0)),setTimeout(function(){a.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200)}}),n.find(".tm-quantity").trigger("showhide.cpfcustom"),n.find(".tm-epo-field").off("change.cpfcustom").on("change.cpfcustom",function(e){t(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),n.find(".tm-epo-field").filter(":checkbox:checked, :radio:checked").not(".tm-epo-variation-element").each(function(){t(this).closest(".tmcp-field-wrap").addClass("tc-active")}),n.find(".tm-epo-field").off("change.cpf").on("change.cpf",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap"),r=a.closest(".tmcp-ul-wrap");if(!a.is(".tm-epo-variation-element")){if(a.is(":checkbox, :radio")&&(a.is(":radio")&&r.find(".tmcp-field-wrap").removeClass("tc-active"),a.is(":checked")?i.addClass("tc-active"):i.removeClass("tc-active")),a.is(".use_images:checkbox, .use_images:radio")&&a.attr("data-imagec")){var c=i.find(".radio_image,.checkbox_image").first();c.length>0&&(a.is(":checked")?c.prop("src",a.attr("data-imagec")):c.prop("src",a.attr("data-image")))}a.is(".use_images:radio")&&a.closest(".cpf-type-radio").find(".use_images:radio").not(a).each(function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".radio_image").first().prop("src",e.attr("data-image"))}),a.is(".tmcp-range")&&a.trigger("change.cpflogic"),a.is("select")?a.trigger("tm-select-change"):(a.is(".tmcp-radio")&&a.closest(".cpf-type-radio").find(".tm-quantity .tm-qty").each(function(){t(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?t(this).removeAttr("disabled"):t(this).attr("disabled","disabled")}),p.trigger({type:"tm-epo-update",norules:1,element:a}))}a.trigger("tm_trigger_product_image"),o.trigger("tm_attempt_product_image",{element:a,main_product:o,epo_holder:n})}),n.find(".tm-has-clearbutton .tm-epo-field").off("change.cpfclearbutton").on("change.cpfclearbutton cpfclearbutton",function(e){var a=t(this),i=a.closest(".cpf_hide_element").find(".tm-epo-reset-radio").removeClass("tm-hidden");a.closest(".tmcp-field-wrap").append(i)}),n.find(".tm-has-clearbutton .tm-epo-field:checked").trigger("cpfclearbutton"),n.find(".tm-epo-reset-radio").off("click.cpf").on("click.cpf",function(){var e=t(this),a=e.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio:checked");a.length&&(a.removeAttr("checked").prop("checked",!1),a.trigger("change.cpf"),a.trigger("change.cpflogic")),e.addClass("tm-hidden")}),n.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield").off("keyup.cpf").on("keyup.cpf",function(){t(this).trigger("change.cpf")}),n.find(".tm-epo-field.tmcp-upload").off("change.cpfv").on("change.cpfv",function(){var e=t(this),a=e.closest("label"),i=e.closest(".tmcp-field-wrap"),o=i.find(".cpf-upload-container"),r=i.find(".tm-filename"),c=e.val().replace("C:\\fakepath\\","");o.length&&r.length<=0&&(r=t('<span class="tm-filename"></span>'),a.after(r)),r.html(c);var d=n.data("num_uploads");d||(d=[]),d[e.closest(".cpf_hide_element").attr("data-uniqid")]=c,n.data("num_uploads",d),e.next(".tmcp-upload-hidden").remove()}),e.find(Z).last().off("change.cpf").on("change.cpf",function(){p.trigger("tm-epo-check-dpd"),t(this).data("tm-prev-value",t(this).val()),p.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",e.find(Z).last().val()),p.on("woocommerce-product-addons-update",function(e){var a=t(this).find("#bkap_price_charged").val();s.find(".cpf-product-price").val(a),l.data("price",a),p.trigger({type:"tm-epo-update"})}),e.find(".total_price").off("wc-measurement-price-calculator-total-price-change.cpf").on("wc-measurement-price-calculator-total-price-change.cpf",function(t,e,a){var i="1"!==l.attr("data-prices-include-tax")&&"incl"===l.attr("data-tax-display-mode"),o="1"===l.attr("data-prices-include-tax")&&"incl"!==l.attr("data-tax-display-mode");i&&!o?a=f(a,l,null,i):!i&&o&&(a=_(a,l,null,o)),s.find(".cpf-product-price").val(a),l.data("price",a),p.trigger({type:"tm-epo-update"})}),e.find(".product_price").off("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf").on("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf",function(t,e,a){var i="1"!==l.attr("data-prices-include-tax")&&"incl"===l.attr("data-tax-display-mode"),o="1"===l.attr("data-prices-include-tax")&&"incl"!==l.attr("data-tax-display-mode");a=i&&!o?f(a,l,null,i):!i&&o?_(a,l,null,o):parseFloat(a),s.find(".cpf-product-price").val(a),l.data("price",a),p.trigger({type:"tm-epo-update"})}),t(".product_price, .total_price").length>0&&t("form.cart").trigger("wc-measurement-price-calculator-update"),p.off("woocommerce-nyp-update.cpf").on("woocommerce-nyp-update.cpf",function(){var t=p.find(".nyp"),e=t.data("price");t.length>0&&(s.find(".cpf-product-price").val(e),l.data("price",e),p.trigger({type:"tm-epo-update"}))}),X.off("woocommerce-nyp-updated.cpf").on("woocommerce-nyp-updated.cpf",function(){p.trigger("woocommerce-nyp-update.cpf")}),p.trigger("woocommerce-nyp-update.cpf"),t("#fancy-product-designer-"+l.parent().attr("data-product-id")).off("priceChange.cpf").on("priceChange.cpf",function(t,e,a){var i=a;l.data("fpdprice"),l.data("fpdprice",parseFloat(i)),void 0===l.data("tcprice")?l.data("tcprice",parseFloat(l.data("price"))):l.data("price",parseFloat(l.data("tcprice"))),i=parseFloat(l.data("price"))+parseFloat(i),l.parent().find(".cpf-product-price").val(i),l.data("price",i),p.trigger({type:"tm-epo-update"})}),p.off("tm-epo-check-dpd").on("tm-epo-check-dpd",function(e){var a=l;if(1==a.data("fields-price-rules")){var i=a.data("product-price-rules"),o=a.data("tm_for_cart");if(i&&o){var r='input[name^="variation_id"]';o.find("input.variation_id").length>0&&(r="input.variation_id");var n=o.find(Z).last(),c=parseFloat(n.val()),d=parseFloat(n.data("tm-prev-value")),s=o.find(r).val();s||(s=0),isNaN(c)&&(a.attr("data-is-sold-individually")||0===n.length)&&(c=1),(i[s]&&0!==s.tmtoFloat()||i[0])&&(i[s]||(s=0),t(i[s.tmtoFloat()]).each(function(t,e){var a=parseFloat(e.min),i=parseFloat(e.max);(isNaN(i)&&a<=c||!isNaN(i)&&a<=c&&c<=i)&&(a<=d&&d<=i||lt(o))}))}}}),p.off("tm-epo-update").on("tm-epo-update",function(e){e.stopImmediatePropagation();var i,c=t(this),d=l.attr("data-tm-epo-final-total-box"),s=c.attr("data-product_id"),m=c.find("input.variation_id").length>0?"input.variation_id":'input[name^="variation_id"]',_=0,f=0,g=!1,b=0,y=l.data("type"),w=!1,k=c.find(Z).last(),x=parseFloat(k.val()),j=1,F=p.find(".cpf-bto-price"),q=!0,C=c.find(m).val(),N=l.attr("data-price-override"),T=[];if(s||(s=c.closest(".component_content").attr("data-product_id"))||(s=0),C||(C=0),a&&l.addClass("cpf-bto-totals"),e.norules?(1==e.norules&&st(e.element),Gt=[],n.find(".tm-epo-late-field").each(function(){var e=t(this),a=e.data("tm-price-for-late");e.data("price",0),Gt.push({setter:e,price:a,bundleid:s})})):lt(c),isNaN(x)&&(l.attr("data-is-sold-individually")||0===k.length)&&(x=1),"1"==tm_epo_js.wc_measurement_qty_multiplier&&p.find("#_measurement_needed").length>0&&(j=p.find("#_measurement_needed").val()),l.length?_=dt(l):F.length>0&&(_=F.val()),f=_,a&&c.find(".cpf-bto-price").length>0?(!0,_=parseFloat(c.find(".cpf-bto-price").val()),q=c.find(".cpf-bto-price").data("per_product_pricing")):!a&&o.find(".cpf-bto-price").length>0&&(i=1,g=[],o.find(".cpf-bto-price").each(function(e,a){if(!isNaN(parseFloat(t(this).val()))){var i=t(this).closest(".cart").find(Z);i=i.length>0?parseFloat(i.val()):1;var o=t(this).parent().find(".cpf-bto-totals").attr("data-is-sold-individually"),r=t(this).parent().find(".cpf-bto-optionsprice").val();r=isNaN(parseFloat(r))?0:parseFloat(r),_=parseFloat(_)+parseFloat(t(this).val()*i),g.push([t(this).val(),r,i,o])}}),o.find(".cpf-bto-optionsprice").each(function(e,a){isNaN(parseFloat(t(this).val()))||(_=parseFloat(_)+parseFloat(t(this).val()))})),!1!==_){(a||At&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement)&&("variable"!=y&&"variable-subscription"!=y||l.data("moved_inside")||l.data("moved_inside",1)),At&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&("bto"!=y&&"composite"!=y||l.data("moved_inside")||(c.find(".bundle_price,.composite_price").after(l),l.data("moved_inside",1))),n.find(".tmcp-field").filter(".tcenabled").each(function(e,a){var i,o=t(this),r=o.closest(".cpf_hide_element"),n=o.closest(".tmcp-field-wrap"),c=r.attr("data-fblabelshow"),d=r.attr("data-fbvalueshow"),s=""===c?r.find(".tm-epo-field-label").html():"",l="",p=n.find(".tm-qty").val();if(void 0===p&&(p=""),o.is(":checkbox, :radio, :input")){var m=0;if(o.is(".tmcp-checkbox, .tmcp-radio"))if(o.is(":checked")){m=o.data("price"),w=!0,o.data("isset",1);var _=o.closest("li.tmcp-field-wrap"),f=_.find(".checkbox_image,.radio_image");l="";var u=o.closest("li.tmcp-field-wrap").find(".tm-label");u.length&&(l=u.html()),f.length&&(l+=f.clone().addClass("tc-img-floating")[0].outerHTML),o.is(".use_images")&&(l=_.find(".tc-label").first().html(),f.length&&(l=l+'<img class="tc-img-floating" src="'+o.attr("data-image")+'"')),T.push({title:s,value:l,price:m,quantity:p,label_show:c,value_show:d})}else o.data("isset",0);else if(o.is(".tmcp-select")){m=o.find("option:selected").data("price");var g=o.children("option:selected");""===g.val()&&""===g.attr("data-rulestype")||(w=!0),o.find("option").data("isset",0),o.find("option:selected").data("isset",1),""===o.find("option:selected").val()&&""===o.find("option:selected").attr("data-rulestype")||(l=o.find("option:selected").attr("data-text"),T.push({title:s,value:l,price:m,quantity:p,label_show:c,value_show:d}))}else if(i=o.val(),o.is('[type="file"]')&&(i=i.replace("C:\\fakepath\\","")),i)if(o.is(".tmcp-range")&&"0"==o.val())o.data("isset",0);else{if(m=o.data("price"),w=!0,o.data("isset",1),l=o.val(),o.is(".tmcp-range")){var h=t(".tm-range-picker[data-field-id='"+o.attr("id")+"']").attr("data-step").split(".");h=1==h.length?0:h[1].length,l=accounting.formatNumber(l,{decimal:D,thousand:I,precision:h})}T.push({title:s,value:l,price:m,quantity:p,label_show:c,value_show:d})}else o.data("isset",0);m||(m=0),b=parseFloat(b)+parseFloat(m)}}),l.data("tm-floating-box-data",T);var S=0,A=0;n.find(".tmcp-sub-fee-field,.tmcp-fee-field").filter(".tcenabled").each(function(){var e=t(this);if(e.is(":checkbox, :radio, :input")){var a=0;if(e.is(".tmcp-checkbox, .tmcp-radio"))e.is(":checked")?(a=e.data("price"),w=!0,e.data("isset",1)):e.data("isset",0);else if(e.is(".tmcp-select")){a=e.find("option:selected").data("price");var i=e.children("option:selected");""===i.val()&&""===i.attr("data-rulestype")||(w=!0),e.find("option").data("isset",0),e.find("option:selected").data("isset",1)}else e.val()?(a=e.data("price"),w=!0,e.data("isset",1)):e.data("isset",0);a||(a=0),e.is(".tmcp-sub-fee-field")&&(S=parseFloat(S)+parseFloat(a)),e.is(".tmcp-fee-field")&&(A=parseFloat(A)+parseFloat(a))}}),Pt=w,z(),A>0&&(w=!0),"bto"!=l.attr("data-type")&&"composite"!=l.attr("data-type")||"show"===$t.data("btois")&&(w=!0),i&&(w=!0),a&&!q&&(w=!1),"pxq"!=d&&"hide"!=d&&"normal"!=d&&"final"!=d&&"hideoptionsifzero"!=d||(w=!0),x>1&&(w=!0),"variable"!=y&&"variable-subscription"!=y||C.tmtoFloat()||(w=!1);var O=b;_=u(_,l);var E=Dt(parseFloat(_)+parseFloat(O),s,l);"disable"==d&&(w=!1),"disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_variation_price&&"yes"!=tm_epo_js.tm_epo_change_original_price||(w=!0),"yes"==tm_epo_js.tm_epo_total_price_as_unit_price&&(x=1);var M,L,P,R={},U=0,H=parseFloat(_*x);if(b=parseFloat(b*x),tm_epo_js.extra_fee&&(U=parseFloat(tm_epo_js.extra_fee),isNaN(U)&&(U=0)),g){_=u(f,l),H=H=parseFloat(_*x);for(var W=0;W<g.length;W++){var X=g[W],$=0;X[3]?($=u(parseFloat(X[0])+parseFloat(X[1]),l),_+=$,H+=parseFloat($)):($=+u(parseFloat(X[0])*parseFloat(X[2])+parseFloat(X[1]),l),_+=$,H+=parseFloat($*x))}}if(O+=E,b=parseFloat(O*x*j),"1"==N&&parseFloat(b)>0&&(_=f=0,H=parseFloat(_*x)),void 0!==l.data("tc_is_bookings")){var Q=l.data("bookings_form"),V=0,tt=!1;Q.length&&("1"==tm_epo_js.wc_booking_person_qty_multiplier&&Q.find('[id^="wc_bookings_field_persons"]').each(function(){V+=parseFloat(t(this).val()),tt=!0}),"1"==tm_epo_js.wc_booking_block_qty_multiplier&&Q.find("#wc_bookings_field_duration").length&&(V+=parseFloat(Q.find("#wc_bookings_field_duration").val()),tt=!0)),tt&&(b*=V)}b=parseFloat(t.tc_apply_filters("tc_adjust_total",b,l)),A=parseFloat(t.tc_apply_filters("tc_adjust_totals_fee",A,l));var et=b+A;M=v(b,l,!0,!0),L=v(A,l,!0,!0);var it=H;H=parseFloat(H+et+U),P=v(H=t.tc_apply_filters("tc_adjust_product_total_price",H,et,U,b,A,l),l,!0,!0);var ot=v(parseFloat(_+O),l,!0,!0);"yes"===tm_epo_js.tm_epo_fees_on_unit_price&&(ot=v(parseFloat(_+parseFloat(O)+parseFloat(parseFloat(A)/x)),l,!0,!0));var rt,nt=!1,ct=!1,mt="",_t=!1,ft=!1,ut="",gt=!1;if("pxq"==d||"final"==d||"hide"==d||0===et&&"hideoptionsifzero"==d||(0===b&&"hideoptionsifzero"==d||(nt=!0),0!==A&&(ct=!0)),U&&(_t=!0,mt=v(U,l,!0,!0)),P&&(ft=!0),l.data("is-subscription")){var ht=parseFloat(l.data("subscription-sign-up-fee"));isNaN(ht)&&(ht=0);var vt=ht+parseFloat(S);vt&&(gt=!0,ut=v(vt,l,!0,!0))}if((!0===e.product_false||void 0!==l.data("bookings_form_init")&&0===l.data("bookings_form_init"))&&(P="-"),R={options_price_per_unit:O,qty:x,product_total_price:H,product_total_price_without_options:it,cart_fee_options_total_price:A,options_total_price:b,total_plus_fee:et,unit_price:tm_epo_js.i18n_unit_price,formatted_unit_price:ot,show_unit_price:"yes"===tm_epo_js.tm_epo_show_unit_price,options_total:tm_epo_js.i18n_options_total,fees_total:tm_epo_js.i18n_fees_total,formatted_options_total:M,formatted_fees_total:L,show_options_total:nt,show_fees_total:ct,extra_fee:tm_epo_js.i18n_extra_fee,formatted_extra_fee:mt,show_extra_fee:_t,final_total:tm_epo_js.i18n_final_total,formatted_final_total:P,show_final_total:ft,sign_up_fee:tm_epo_js.i18n_sign_up_fee,formatted_subscription_fee_total:ut,show_sign_up_fee:gt},R=t.tc_apply_filters("tc_adjust_tc_totals_ob",R,{epo_object:Bt,tm_set_price:h,tm_set_price_totals:v,product_total_price:H,product_price:_,qty:x}),l.data("tc_totals_ob",R),rt=t.fn.tm_template(K.tc_final_totals,R),l.data("tm-html",rt),l.data("tc_totals_ob",R),w&&x>0){if("disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_variation_price||(!0===t.tc_apply_filters("hide_native_price",!0)&&"disable"!=d&&"disable_change"!=d?pt(c).hide():pt(c).show()),"disable"==d||"disable_change"==d||"hideifoptionsiszero"==d&&0===et||"hide"==d?(rt="",l.html(rt).hide(),Xt.hide()):(l.html(rt).show(),Xt.show(),Y.trigger("tc-totals-container",{epo:R,totals_holder:l,data:{epo_object:Bt,tm_set_price:h,tm_set_price_totals:v,product_total_price:H,product_price:_,qty:x},tm_epo_js:tm_epo_js})),P&&H>=0){var bt=pt(c),yt=accounting.formatMoney(H,{symbol:"",decimal:D,thousand:I,precision:tm_epo_js.currency_format_num_decimals,format:""});if(tm_epo_js.customer_price_format){var wt=tm_epo_js.customer_price_format_wrap_start+tm_epo_js.customer_price_format+tm_epo_js.customer_price_format_wrap_end;yt=(wt=wt.replace("__PRICE__",yt)).replace("__CODE__",tm_epo_js.current_currency)}"disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_variation_price||bt.html(t.fn.tm_template(K.tc_formatted_price,{price:yt})).show(),"disable_change"!=d&&"yes"!=tm_epo_js.tm_epo_change_original_price||(s&&a&&c.find(".cpf-bto-price").length>0&&et>0?t("#component_"+s).find(G).html(t.fn.tm_template(K.tc_formatted_price,{price:yt})).show():!a&&o.find(".cpf-bto-price").length>0&&et>0?c.find(B).html(t.fn.tm_template(K.tc_formatted_price,{price:yt})).show():H>0?t(J).html(t.fn.tm_template(K.tc_formatted_price,{price:yt})).show():y&&"composite"!==y&&t(J).html(tm_epo_js.current_free_text))}a?(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(b)),St.trigger({type:"tm-epo-update",norules:1})):($t.data("is_active",!0),at())}else pt(c).show().each(function(){t(this).data("tm-original-html")?t(this).html(t(this).data("tm-original-html")):t(this).data("tm-original-html",t(this).html())}),0===f&&"yes"==tm_epo_js.tm_epo_remove_free_price_label&&pt(c).hide(),l.empty().hide(),a&&(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(b*x)),St.trigger({type:"tm-epo-update",norules:1})),at();r&&o.find(".bto_form_"+r+",#composite_form_"+r+",#composite_data_"+r).trigger("cpf_bto_review"),St.trigger("tm-epo-after-update"),Y.trigger("tc-epo-after-update",{epo:R,totals_holder:l,data:{epo_object:Bt,tm_set_price:h,tm_set_price_totals:v,product_total_price:H,product_price:_,qty:x},tm_epo_js:tm_epo_js})}else l.empty()}),e.find(".variations_form").off("found_variation.tmepo tm_fix_stock",".single_variation_wrap").on("found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(a,i){q(t(this),e)}),"variable"!=b&&"variable-subscription"!=b||(e.find(".variations_form").off("found_variation.tmepo").on("found_variation.tmepo",function(a,o){i(0,o),q(t(this),e),t(this).trigger("wc-measurement-price-calculator-update")}).off("hide_variation.tmepo").on("hide_variation.tmepo",function(t,e){p.trigger({type:"tm-epo-update",norules:2})}).trigger("check_variations"),Y.on("tm-do-epo-update",function(){p.trigger({type:"tm-epo-update"})})),e.find(".variations select").off("blur.cpf").on("blur.cpf",function(){o.find(".variations_form").data("tm_variations_did_init",!0)}),Tt(e,m,o,n),_t(),Y.trigger("tm-epo-init-events",{epo:{epo_id:d,form:x(),current_cart:p,cart_container:e,epo_holder:n,totals_holder_container:s,totals_holder:l,main_cart:St,main_epo_inside_form:At,product_id_selector:Zt,epo_id_selector:Ht,product_id:c,this_epo_container:Wt,this_totals_container:Xt,this_epo_totals_container:$t}}),Y.trigger("epo_options_before_visible"),"yes"===tm_epo_js.tm_epo_progressive_display?setTimeout(function(){n.css("opacity",0).addClass("tc-show").animate({opacity:1},L,"easeOutExpo",function(){Y.trigger("epo_options_visible"),Y.trigger("tmlazy")})},M):(n.addClass("tc-show"),Y.trigger("epo_options_visible"),Y.trigger("tmlazy"))}function _t(){var e=[".tm-variation-ul-color",".tm-variation-ul-image","ul.use_images_container","ul.use_colors_container"];t.each(e,function(e,a){o.find(a).each(function(e,a){t(a).each(function(e,a){var i=(a=t(a)).find(".tmhexcolorimage-li-nowh");if(i.length){var o,r=a.closest(".cpf-section"),n=i.first();r.length&&r.find(".tm-collapse-wrap.closed").length?(r.find(".tm-collapse-wrap").removeClass("closed").show().css({position:"absolute",visibility:"hidden"}),n.find("label").css("width","100%"),n.find(".tmhexcolorimage").css("width","100%"),n.height(),o=n.width(),r.find(".tm-collapse-wrap").addClass("closed").hide().css({position:"",visibility:""})):(n.height(),o=n.width());i.find(".tmhexcolorimage").css({"min-width":o+"px","min-height":o+"px"})}})})})}function ft(){if(!o.data("tm-composite-setup")){var e=$t;o.data("tm-composite-setup",1),t(W).find(".cart").append('<input type="hidden" class="tm-post-support addon">'),o.find(".tm-post-support.addon").on("change",function(e){t(this).closest(W).trigger("wc-composite-item-updated.cpf")}),t(W).off("found_variation.cpf").on("found_variation.cpf",function(i,r){var n,c=t(this),d=it(c),s=ot(d),l=nt(c);s&&(o.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(rt(l)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(rt(l)).find(".amount").empty(),!0===a(s)&&(n=parseFloat(r.price)),c.find(".cpf-bto-price").data("per_product_pricing",a(s)),c.find(".cpf-bto-price").val(n),St.data("per_product_pricing",a(s)),c.find(".cart").trigger({type:"tm-epo-update",norules:1}),setTimeout(function(){St.trigger({type:"tm-epo-update",norules:1})},100),e.data("btois","none"))}).off("wc-composite-component-loaded.cpf").on("wc-composite-component-loaded.cpf",function(){t(this).trigger("wc-composite-item-updated.cpf")}).off("wc-composite-item-updated.cpf").on("wc-composite-item-updated.cpf",function(){gt(),o.find(".tm-collapse").tmtoggle();var e=t(this),r=e.find(".tm-extra-product-options");l(e),s(e),ht(e),vt(),p(r),m(r),i(r);var n,c=it(e),d=ot(c),_=nt(e);o.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(rt(_)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(rt(_)).find(".amount").empty(),d&&(!0===a(d)&&(n=parseFloat(e.find(".bto_item_data,.component_data").data("price"))),e.find(".cpf-bto-price").data("per_product_pricing",a(d)),e.find(".cpf-bto-price").val(n),St.data("per_product_pricing",a(d)),mt(e,e.find(".cart")),e.find(".cart").trigger({type:"tm-epo-update",composite_item:e}),St.trigger({type:"tm-epo-update",norules:1}),q(e.find(".cart"),e))}).off("change.cpfbto",".bto_item_options select,.component_options_select").on("change.cpfbto",".bto_item_options select,.component_options_select",function(a){var i=t(this),r=it(i),n=nt(i);o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(rt(n)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(rt(n)).find(".amount").empty(),""===i.val()?(e.data("passed",!1),e.data("btois","none")):St.trigger({type:"tm-epo-update",norules:1})}).off("woocommerce_variation_select_change.cpf").on("woocommerce_variation_select_change.cpf",function(a){var i=t(this),r=it(i),n=nt(i);o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(rt(n)).removeData("cpf_review_price"),o.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(rt(n)).find(".amount").empty(),""===i.find(".variations .attribute-options select").val()&&(e.data("passed",!1),e.data("btois","none"))}),o.find(".bundle_wrap").off("show_bundle.cpf,wc-composite-show-add-to-cart.cpf").on("show_bundle.cpf,wc-composite-show-add-to-cart.cpf",function(){ut(t(this).closest(".cart").attr("data-container-id"))}),o.find(".composite_data .composite_wrap").off("wc-composite-show-add-to-cart.cpf").on("wc-composite-show-add-to-cart.cpf",function(){var e=t(this).closest(".composite_form").find(".composite_data").data("container_id");ut(e),o.find("#composite_data_"+e).trigger("cpf_bto_review")}),o.find(".bto_form,.composite_form").off("woocommerce-product-addons-update.cpf cpf_bto_review").on("woocommerce-product-addons-update.cpf cpf_bto_review",function(){var e=t(this);e.parent().find(W).each(function(){var a,i=t(this),o=nt(i),r=e.find(rt(o)),n=t(".widget_composite_summary_elements").find(".summary_element.summary_element_"+o),c=i.find(".cpf-bto-optionsprice").val(),d=e.find(".tc-epo-totals.tm-cart-"+o);r.length&&(r.data("cpf_review_price")?a=accounting.unformat(r.data("cpf_review_price"),D):r.find(".amount").length&&(a=accounting.unformat(r.find(".amount").html(),tm_epo_js.currency_format_decimal_sep),r.data("cpf_review_price",a)),c&&d.data("tc_totals_ob")&&(r.find(".amount").html(d.data("tc_totals_ob").formatted_final_total),n.find(".amount").html(d.data("tc_totals_ob").formatted_final_total)))})}),t(W).trigger("wc-composite-component-loaded.cpf")}}function ut(e){var a=!0,i=$t;o.find(".bto_form_"+e+",#composite_form_"+e+",#composite_data_"+e).parent().find(W).each(function(){var i=t(this),r=nt(i),n=o.find(".bto_form_"+e+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_form_"+e+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_data_"+e+" .composite_wrap .composite_button .form_data_"+r),c=n.find("input.product_input").val(),d=n.find("input.quantity_input").val(),s=n.find("input.variation_input").val(),l=i.find(".bto_item_data,.component_data").data("product_type");void 0===l||""===l||""===c?a=!1:"none"!=l&&""===d?a=!1:"variable"==l&&void 0===s&&(a=!1)}),a?i.data("btois","show"):i.data("btois","none"),St.trigger({type:"tm-epo-update",norules:1})}function gt(){if("yes"!=tm_epo_js.tm_epo_no_lazy_load){var e;(e=E?t(E).find("img.tmlazy"):t(".tc-extra-product-options img.tmlazy")).lazyLoadXT(),e.on("lazyshow",function(){t(window).trigger("lazyLoadXToncomplete")})}}function ht(e){e||(e=Wt),e.find(".tm-owl-slider-section").each(function(){var e=t(this),a=e.css("display");e.find(".tm-slide").first().before('<div class="tm-owl-slider"></div>'),e.find(".tm-slide").appendTo(e.find(".tm-owl-slider")),a=(e=e.find(".tm-owl-slider")).css("display"),e.show().addClass("tcowl-carousel").tmowlCarousel({dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[tm_epo_js.i18n_prev_text,tm_epo_js.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1}),e.css("display",a)})}function vt(e){e||(e=Wt.find(".tm-color-picker")),t(e).length&&(t(e).spectrum({showButtons:!0,clickoutFiresChange:!1,chooseText:tm_epo_js.closeText,cancelText:tm_epo_js.i18n_cancel}),t(e).spectrum("enable"))}function bt(e){var a=e.closest(".tmcp-field-wrap").find("label img"),i=t(a).first().attr("data-original");return e.is("select.tm-product-image")&&(e=e.children("option:selected")),i||(i=t(a).first().attr("src")),i||(i=e.attr("data-image")),e.attr("data-imagep")&&(i=e.attr("data-imagep")),!!i}function yt(e,a){var i=!1,o=t(".images"),r=t(".yith_magnifier_zoom"),n=o.find(".yith_magnifier_zoom").first().attr("href"),c=o.find(".yith_magnifier_zoom img").first().attr("src");window.yith_magnifier_options&&o.data("yith_magnifier")&&(i=!0);var d=!1,s=t(".iosSlider.product-gallery-slider,.iosSlider.product-slider");s.length&&s.iosSlider&&(d=!0);var l=!1,p=a.find(".images .fusion-flexslider");p.length&&p.flexslider&&(l=!0);var m=e.data("elevateZoom")||!1,_=a.find("div.product-images .woocommerce-main-image"),f=!1,u=a.find(".images .easyzoom");u.length&&u.filter(".images .easyzoom.first").data("easyZoom")&&(u=u.filter(".images .easyzoom.first").data("easyZoom"),f=!0);var g=!1,h=a.find(".images .easyzoom");f||(h=a.find(".images .has-image-zoom .slide")).length&&h.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(h=h.filter(".images .has-image-zoom .slide.first").data("easyZoom"),g=!0),Y.on("load",function(){setTimeout(function(){u.length&&u.data("easyZoom")&&(u=u.data("easyZoom"),f=!0),h.length&&h.data("easyZoom")&&(h=h.data("easyZoom"),g=!0)},150)});var v=!1,b=a.find(".woocommerce-product-gallery"),y=!1;if(b.length&&b.data("flexslider")&&(v=!0,t.isFunction(t.fn.zoom)&&window.wc_single_product_params&&window.wc_single_product_params.zoom_enabled)){var w=e.closest(".woocommerce-product-gallery__image");w.length>0&&e.width()>t(".woocommerce-product-gallery").width()&&(y=w,e.data.wc27_zoom_target=y)}var k=t.isFunction(t.fn.zoom)&&wc_single_product_params.zoom_enabled,x=!1;return!v&&k&&(x=a.find(".woocommerce-product-gallery__image")),{is_yith_wcmg:{type:"yith",enabled:i,element:o,yith_wcmg_zoom:r,_yith_wcmg_default_zoom:n,yith_wcmg_default_image:c},is_iosSlider:{type:"iosslider",enabled:d,element:s},is_flexslider:{type:"flexslider",enabled:l,element:p},is_elevateZoom:{type:"elevatezoom",enabled:m,element:_},is_easyzoom:{type:"easyzoom",enabled:f,element:u},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:g,element:h},is_wc27_gallery:{type:"woocommerce",enabled:v,element:b},is_zoom_enabled:{type:"zoom",enabled:!v&&k,element:x}}}function wt(e,a,i,o,r,n,c){for(var d in e)if(e.hasOwnProperty(d)&&(d=e[d]).enabled)switch(d.type){case"yith":if(a){a.attr("srcset",i).attr("src-orig",i),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy");var s={elements:{zoom:t(".yith_magnifier_zoom"),zoomImage:a,gallery:t(".yith_magnifier_gallery li a")}};d.element.yith_magnifier(t.extend(!0,{},window.yith_magnifier_options,s))}else o?d.yith_wcmg_zoom.attr("href",d.yith_wcmg_default_zoom):d.yith_wcmg_zoom.attr("href",d._yith_wcmg_default_zoom),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),d.element.yith_magnifier(window.yith_magnifier_options);break;case"iosslider":setTimeout(function(){d.element.iosSlider("update")},150);break;case"flexslider":Y.trigger("resize");break;case"elevatezoom":d.element.each(function(){var e=t(this).data("elevateZoom");void 0!==e&&e.swaptheimage(i,i)});break;case"easyzoom":d.element.swap(null,i);break;case"easyzoom-flatsome":d.element.swap(i,i);break;case"woocommerce":d.element.flexslider(0);var l=d.element;window.setTimeout(function(){l.trigger("woocommerce_gallery_init_zoom"),Y.trigger("resize")},10);break;case"zoom":if(c){var p=c.find(".woocommerce-product-gallery--with-images").width(),m=!1;if(t(d.element).each(function(e,a){if(t(a).find("img.wp-post-image").attr("data-large_image_width")>p)return m=!0,!1}),m){var _={touch:!1};"ontouchstart"in window&&(_.on="click"),d.element.trigger("zoom.destroy"),d.element.zoom(_)}else d.element.trigger("zoom.destroy")}}Y.trigger("tm_gallery_compatibility_actions",{event_data:r,product_element:c,form:n})}function kt(){var t=o.closest("#product-"+c);return t.length<=0&&(t=o.closest(".post-"+c)),t}function xt(e){var a;return""!==tm_epo_js.tm_epo_global_product_image_selector?a=t(tm_epo_js.tm_epo_global_product_image_selector):0===(a=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first()).length&&(a=e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first()),t(a).length>1&&(a=t(a).first()),a}function jt(t,e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=e,c=e.closest("a");t&&t.image_link&&t.image_link&&t.image_link.length>1?(null===t.full_src&&(t.full_src=t.image_link),null===t.full_src_w&&(t.full_src_w=n.attr("data-large_image_width")),null===t.full_src_h&&(t.full_src_h=n.attr("data-large_image_height")),n.length&&(t.image_srcset||(t.image_sizes=!1),t.image_sizes||(t.image_srcset=!1),n.tc_set_attr("src",t.image_link,0),n.tc_set_attr("srcset",t.image_srcset,0),n.tc_set_attr("sizes",t.image_sizes,0),n.tc_set_attr("title",t.image_title,0),n.tc_set_attr("alt",t.image_alt,0),n.tc_set_attr("data-src",t.full_src,0),n.tc_set_attr("data-large_image",t.full_src,0),n.tc_set_attr("data-large_image_width",t.full_src_w,0),n.tc_set_attr("data-large_image_height",t.full_src_h,0),r.tc_set_attr("data-thumb",t.image_link,1)),o.length&&o.tc_set_attr("src",t.image_link,2),c.length&&(c.tc_set_attr("href",t.full_src,3),c.tc_set_attr("title",t.image_caption,3))):(n.length&&(n.tc_reset_attr("src",0),n.tc_reset_attr("srcset",0),n.tc_reset_attr("sizes",0),n.tc_reset_attr("title",0),n.tc_reset_attr("alt",0),n.tc_reset_attr("data-src",0),n.tc_reset_attr("data-large_image",0),n.tc_reset_attr("data-large_image_width",0),n.tc_reset_attr("data-large_image_height",0),r.tc_reset_attr("data-thumb",1)),o.length&&o.tc_reset_attr("src",2),c.length&&(c.tc_reset_attr("href",3),c.tc_reset_attr("title",3)))}function Ft(e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=e,c=e.closest("a");t.isEmptyObject(t.tc_product_image)?t.tc_product_image_store=t.tc_populate_store(e,a,i):t.tc_product_image_store=t.tc_maybe_copy_object_values(t.tc_product_image_store,t.tc_product_image),n.tc_update_attr("src",0),n.tc_update_attr("srcset",0),n.tc_update_attr("sizes",0),n.tc_update_attr("title",0),n.tc_update_attr("alt",0),n.tc_update_attr("data-src",0),n.tc_update_attr("data-large_image",0),n.tc_update_attr("data-large_image_width",0),n.tc_update_attr("data-large_image_height",0),r.tc_update_attr("data-thumb",1),o.tc_update_attr("src",2),c.tc_update_attr("href",3),c.tc_update_attr("title",3)}function qt(e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=e,c=e.closest("a");n.attr("data-o_src",t.tc_product_image_store[0].src),n.attr("data-o_srcset",t.tc_product_image_store[0].srcset),n.attr("data-o_sizes",t.tc_product_image_store[0].sizes),n.attr("data-o_title",t.tc_product_image_store[0].title),n.attr("data-o_alt",t.tc_product_image_store[0].alt),n.attr("data-o_data-src",t.tc_product_image_store[0]["data-src"]),n.attr("data-o_data-large_image",t.tc_product_image_store[0]["data-large_image"]),n.attr("data-o_data-large_image_width",t.tc_product_image_store[0]["data-large_image_width"]),n.attr("data-o_data-large_image_height",t.tc_product_image_store[0]["data-large_image_height"]),r.attr("data-o_data-thumb",t.tc_product_image_store[1]["data-thumb"]),t.tc_product_image_store[2]&&o.attr("data-o_src",t.tc_product_image_store[2].src),c.attr("data-o_href",t.tc_product_image_store[3].href),c.attr("data-o_title",t.tc_product_image_store[3].title)}function Ct(){setTimeout(function(){"inline"==window.tm_epo_js.tm_epo_global_product_image_mode?Nt():zt()},window.tc_epo_product_image_setup_delay||0)}function zt(){var a,i,r=Bt.form,n=kt(),c=[];a=xt(n),i=yt(a,n),t(a).length>0&&(r.on("reset_image.tcpi",function(i){t.tc_product_image=t.tc_replace_object_values(t.tc_product_image,t.tc_product_image_store);var c=[];t(Wt.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&c.push(a)}),c.length?c[c.length-1].trigger("tm_trigger_product_image"):t.tc_product_image_store=t.tc_populate_store(a,n,r)}),r.on("found_variation.tcpi",function(i,c){Ft(a,n,r);var d=[];t(Wt.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&d.push(a)}),d.length&&(qt(a,n,r),d[d.length-1].trigger("tm_trigger_product_image"))}),t.tc_product_image_store=t.tc_maybe_copy_object_values_from_img(t.tc_product_image_store,a,n,r),o.off("tm_change_product_image").on("tm_change_product_image",function(d,s){var l=s.element,p=s.element_current;if(l&&p){var m=""!==l.data("imagep")?"imagep":"image",_=s.element_current.data("image-variations");if(_&&(_=_[m]),c=[],t(Wt.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);a.is("option")&&(a=a.closest("select")),e(a)&&""!==a.val()&&c.push(a)}),c.length&&!c[c.length-1].is(l))return;jt(_,a,n,r),wt(i,a,_.image_link,!1,s,r,n)}}),o.off("tm_restore_product_image").on("tm_restore_product_image",function(c,d){var s=d.element,l=[];s&&(t(Wt.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&l.push(a)}),l.length&&!l[l.length-1].is(s))?l[l.length-1].trigger("tm_trigger_product_image"):(jt(!1,a,n,r),wt(i,!1,a.attr("src"),!1,d,r,n))}),o.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){}),c=[],t(Wt.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&c.push(a)}),c.length&&c[c.length-1].trigger("tm_trigger_product_image")),Y.trigger("tm_product_image_loaded")}function Nt(){var a,i,r=Bt.form,d=kt();if(a=xt(d),i=yt(a,d),t(a).length>0){a.data("tm-current-image",!1);var s=a.closest("a"),l=a.attr("src"),p=a.width(),m=a.height();o.off("tm_change_product_image").on("tm_change_product_image",function(o,d){var s,l=d.element.closest(".cpf-section"),_=(l.is(".tm-epo-variation-section")?l:d.epo_holder).find(".tm-product-image:checked,select.tm-product-image"),f=[],u=d.element.attr("id"),g=!0,h=d.main_product,v=h.closest("#product-"+c),b=p,y=m,w=t("<div class='blockUI blockOverlay tm-preloader-img'></div>");v.length<=0&&(v=h.closest(".post-"+c)),0===(s=v.find("#"+u+"_tmimage")).length&&(s=a);var k=function(){w.remove(),r.tc_image_update(!1),a.data("tm-current-image",!1),v.find(".tm-clone-product-image").hide(),a.show()};if(d.src!=s.attr("src")||!s.is(":visible"))if(!1!==d.src){w.css({width:b,height:y}),_.each(function(){var a=t(this);e(a)&&bt(a)&&n({element:a.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&f.push(a)}),f.length&&(_=f[f.length-1]).attr("id"),_.attr("id")!=d.element.attr("id")&&(g=!1);var x=a.tm_clone(),j=new Image;x.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),g&&a.before(w),i.is_yith_wcmg.yith_wcmg_default_zoom=i.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),i.is_yith_wcmg.yith_wcmg_default_image=i.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),j.onerror=function(){k()},j.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();v.find("#"+u+"_tmimage").remove(),v.find(".tm-clone-product-image").hide(),x.prop("src",j.src).hide(),a.hide().after(x),x.css("opacity",0).show(),wt(i,x,j.src),w.animate({opacity:0},750,"easeOutExpo",function(){w.remove()}),x.animate({opacity:1},window.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),Y.trigger("tm_change_product_image_loaded",{src:d.src,element:d.element,main_product:d.main_product,epo_holder:d.epo_holder})},x.attr("id",u+"_tmimage").addClass("tm-clone-product-image").hide(),x.attr("src-orig")&&x.attr("src-orig",d.src),g?(j.src=d.src,r.tc_image_update(d.element,x),a.data("tm-current-image",u),Y.trigger("tm_change_product_image_show",{src:d.src,element:d.element,main_product:d.main_product,epo_holder:d.epo_holder})):(x.prop("src",d.src).hide(),a.after(x)),Y.trigger("tm_change_product_image_end",{src:d.src,element:d.element,main_product:d.main_product,epo_holder:d.epo_holder})}else k()}),o.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){Y.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});var o,n,d,p,m,_=e.element.attr("id"),f=e.main_product,u=f.closest("#product-"+c),g=e.element.closest(".cpf-section"),h=g.is(".tm-epo-variation-section")?g:e.epo_holder,v=!1;if(u.length<=0&&(u=f.closest(".post-"+c)),d=u.find("#"+_+"_tmimage").is(":visible"),u.find("#"+_+"_tmimage").remove(),0===u.find(".tm-clone-product-image").length)a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1);else{if(!d)return void Y.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});p=u.find(".tm-clone-product-image").length,_=a.data("tm-current-image");for(var b=p-1;b>=0;b--){if(n=u.find(".tm-clone-product-image").eq(b),o=n.attr("id").replace("_tmimage",""),(m=h.find('[id="'+o+'"]')).is(":checked")&&m.closest(".cpf_hide_element").is(":visible")){u.find(".tm-clone-product-image").eq(b).show(),s.attr("href",u.find(".tm-clone-product-image").eq(b).prop("src")),a.data("tm-current-image",o),v=!0;break}u.find(".tm-clone-product-image").eq(b).hide()}v?u.find("#"+_+"_tmimage").remove():(a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1))}wt(i,!1,v?n.attr("src"):l,u.find(".tm-clone-product-image").filter(":visible").length),Y.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),o.off("tm_attempt_product_image").on("tm_attempt_product_image",function(o,d){var p,m,_,f,u=d.main_product,g=u.closest("#product-"+c),h=d.element?d.element.closest(".cpf-section"):t(u.find(".tm-epo-variation-section"),d.epo_holder),v=h.is(".tm-epo-variation-section")?h:d.epo_holder,b=v.find(".tm-product-image:checked,select.tm-product-image"),y=[],w="",k=!1,x=a.data("tm-current-image");if(g.length<=0&&(g=u.closest(".post-"+c)),v=u.find(".tm-epo-variation-section").add(d.epo_holder),(b=v.find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&bt(a)&&n({element:a.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&y.push(a)}),y.length&&(w=(b=y[y.length-1]).attr("id")),!y.length||!b.length||x&&w==x){var j=v.find('[id="'+x+'"]').closest(".cpf_hide_element");if(x&&(!1===j.data("isactive")||!1===j.closest(".cpf-section").data("isactive"))){if(g.find("#"+x+"_tmimage").remove(),0===(_=g.find(".tm-clone-product-image").length))a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1);else{for(var F=_-1;F>=0;F--){if(p=g.find(".tm-clone-product-image").eq(F),m=p.attr("id").replace("_tmimage",""),(f=v.find('[id="'+m+'"]')).is(":checked")&&f.closest(".cpf_hide_element").is(":visible")){g.find(".tm-clone-product-image").eq(F).show(),s.attr("href",g.find(".tm-clone-product-image").eq(F).prop("src")),a.data("tm-current-image",m),k=!0;break}g.find(".tm-clone-product-image").eq(F).hide()}k||(a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1))}wt(i,!1,k?p.attr("src"):l,g.find(".tm-clone-product-image").filter(":visible").length)}}else b.last().trigger("tm_trigger_product_image")});var _=[];t(Wt.find(".tm-product-image:checked,select.tm-product-image")).add(o.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var a=t(this);e(a)&&""!==a.val()&&_.push(a)}),_.length&&_[_.length-1].trigger("tm_trigger_product_image")}Y.trigger("tm_product_image_loaded")}function Tt(e,a,i,o){var r='input[name^="variation_id"]';if(e.find("input.variation_id").length>0&&(r="input.variation_id"),o.find(".tm-epo-variation-element").length||o.data("tm-epo-variation-element")){o.data("tm-epo-variation-element",o.find(".tm-epo-variation-element"));var n,c=o.find(".tm-epo-variation-section");if(a&&"main"!=a){n=c.closest("li.tm-extra-product-options-field"),e.find(".variations").hide().after(c.addClass("tm-extra-product-options nopadding")),n.is(":empty")&&n.hide();var d=!1;e.off("wc_variation_form.tmlogic").on("wc_variation_form.tmlogic",function(){d=!0,e.find(".variations_form").on("click.tmlogic",".reset_variations",function(t){e.find(".tm-epo-variation-element").closest("li").show(),e.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),e.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),Y.trigger("tmlazy"),i.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(t,a){j(e)});for(var t=0;t<A.length;t++){var a=A[t];if("object"==typeof a){var o="string"==typeof a.name||!1,n="string"==typeof a.selector||!1,c="function"==typeof a.func||!1;o&&c&&('input[name="variation_id"]'==n&&(n=r),a.selector?e.data("tm-styled-variations",1).off(a.name,a.selector).on(a.name,a.selector,a.func):e.data("tm-styled-variations",1).off(a.name).on(a.name,a.func))}}A=[],e.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}),Q.ready(function(){0==d&&e.trigger("wc_variation_form.tmlogic")})}else{(e=e.find(".variations_form")).find(".variations").hide(),n=c.closest("li.tm-extra-product-options-field"),e.find(".variations").hide().after(c.addClass("tm-extra-product-options nopadding")),n.is(":empty")&&n.hide(),e.off("click.tmlogic",".reset_variations").on("click.tmlogic",".reset_variations",function(t){e.find(".tm-epo-variation-element").closest("li").show(),e.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),e.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),Y.trigger("tmlazy"),i.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(t,a){j(e)});for(var s=0;s<A.length;s++){var l=A[s];if("object"==typeof l){var p="string"==typeof l.name||!1,m="string"==typeof l.selector||!1,_="function"==typeof l.func||!1;p&&_&&('input[name="variation_id"]'==m&&(m=r),l.selector?e.data("tm-styled-variations",1).off(l.name,l.selector).on(l.name,l.selector,l.func):e.data("tm-styled-variations",1).off(l.name).on(l.name,l.func))}}A=[],e.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}Et[Et.length]={trigger:function(){return!0},on_true:function(){return i.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){i.find(".tm-epo-variation-element").removeAttr("disabled")}},t(document.body).on("added_to_cart",function(){i.find(".tm-epo-variation-element").removeAttr("disabled")})}}function Dt(a,i,o){var r=0;return t.each(Gt,function(n,c){var d,s,l=c.price,p=c.original_price,m=c.setter,_=c.bundleid,f=m;m.is("option")&&(f=m.closest("select")),d=f.attr("name").tmjid();var v=t(".tc-totals-form.tm-totals-form-"+o.attr("data-cart-id")).attr("data-product-id"),b=t(".tc-totals-form.tm-totals-form-"+o.attr("data-cart-id")).attr("data-epo-id");s=t(".tc-extra-product-options.tm-product-id-"+v+"[data-epo-id='"+b+"']").find("#"+d+"_hidden");var w,k;_==i?(l=l/100*a,p=p/100*a,f.data("tm-quantity")&&(l*=parseFloat(f.data("tm-quantity")),p*=parseFloat(f.data("tm-quantity"))),1==m.data("isset")&&e(m)&&(r+=l),w=h(l,o,!0,!1,m),k=h(p,o,!0,!1,m),m.data("price",u(l,o,m)),m.data("pricew",u(l,o,m)),m.data("original_price",u(p,o,m)),m.data("original_pricew",u(p,o,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),l,w,p,k),0===s.length&&f.before('<input type="hidden" id="'+d+'_hidden" name="'+d+'_hidden" value="'+g(l,o,m)+'" />'),m.is(".tm-epo-field.tmcp-radio")?m.is(":checked")&&s.val(g(l,o,m)):s.val(g(l,o,m))):void 0!==m.data("pricew")&&(w=h(m.data("pricew"),o,!0,!1,m),k="",void 0!==m.data("original_pricew")&&(k=h(m.data("original_pricew"),o,!0,!1,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),m.data("pricew"),w,m.data("original_pricew"),k))}),Gt=[],r}var It=!1;o=t(o),t.fn.apply_submit_events=w,Y.trigger("tm-epo-init-start");var St=!1,At=!1,Ot=!1,Et=[],Mt=!1,Lt=void 0!==c,Pt=!1,Rt=!1;if(Lt||o.is(".product")&&(Rt=!0,Lt=X.find(P).length),Lt||"no"!=tm_epo_js.tm_epo_enable_final_total_box_all||o.is(".tm-no-options-composite")){if(Rt&&(Y.trigger("tm-epo-init-no-options"),!o.is(".product")||o.is(".tm-no-options-pxq")||o.is(".tm-no-options-composite")||(o=X)),!c){var Ut=o.find(R).last();Ut.length>0?c=Ut.val():(Ut=t(".tc-totals-form.tm-totals-form-main"),c=Ut.attr("data-product-id")),c||(c="")}d||(d=parseInt(o.find("input.tm-epo-counter").last().val()),isNaN(d)&&(d=""));var Zt=".tm-product-id-"+c,Ht='[data-epo-id="'+d+'"]',Wt=t(".tc-extra-product-options"+Zt+Ht),Xt=t(".tc-totals-form"+Zt+Ht),$t=t(".tc-epo-totals"+Zt+Ht);!function(){St||(St=k(o,"form",c));var e=x(),a=e.find(P).length,i=e.find(".tc-totals-form").length;a>0&&(At=!0),i>0&&(Ot=!0),Ot||(Et[Et.length]={trigger:function(){return!0},on_true:function(){var a=t(".tc-totals-form.tm-product-id-"+c+'[data-epo-id="'+d+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo-normal"></div>');return e.find(".tm-formepo-normal").remove(),i.append(a),e.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}}),At||(Et[Et.length]={trigger:function(){return!0},on_true:function(){var a=t(P+".tm-product-id-"+c+'[data-epo-id="'+d+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo"></div>');return e.find(".tm-formepo").remove(),i.append(a),e.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}})}(),St.data("product_id",c).data("epo_id",d).data("product_id_selector",Zt).data("epo_id_selector",Ht),function(){Wt.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var e=t(this);N(e,!0),T(e,!0)});var e=Wt.find(".tm-exactlimit");e.length&&O(e);var a=Wt.find(".tm-minimumlimit");a.length&&tt(a)}(),"yes"==tm_epo_js.tm_epo_upload_popup&&(Et[Et.length]={trigger:function(){return!0},on_true:function(){var e=Wt.data("num_uploads");return e&&t("body").tm_floatbox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tm_wrapper",data:t.fn.tm_template(K.tc_upload_messages,{files:e,title:tm_epo_js.i18n_uploading_files,message:tm_epo_js.i18n_uploading_message})}),!0},on_false:function(){return!0}}),l(),s(),Q.on("click.cpfurl change.cpfurl tmredirect",".use_url_container .tmcp-radio, .use_url_container .tmcp-radio+label",function(e){var a=t(this).attr("data-url");a&&window.location!=a&&(e.preventDefault(),window.location=a)}),Q.on("change.cpfurl tmredirect",".use_url_container .tmcp-select",function(e){var a=t(this).children("option:selected").attr("data-url");a&&window.location!=a&&(e.preventDefault(),window.location=a)}),at(),function(){try{t(".tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").each(function(e,a){var i=t(a);if(ClipboardEvent||DataTransfer){var o=new ClipboardEvent("").clipboardData||new DataTransfer;o.items.add(new File([i.attr("data-file")],i.attr("data-filename"))),a.files=o.files}i.trigger("change"),i.after('<input type="hidden" class="tmcp-upload-hidden" name="'+i.attr("name")+'" value="'+i.attr("data-file")+'" />')})}catch(t){}}(),t.tm_tooltip(Wt.find(".tm-tooltip")),Wt.find(".tm-collapse").tmtoggle(),Wt.find(".tm-section-link").tmsectionpoplink();var Bt={main_product:o,main_cart:St,epo_id:d,form:x(),main_epo_inside_form:At,product_id_selector:Zt,epo_id_selector:Ht,product_id:c,this_epo_container:Wt,this_totals_container:Xt,this_epo_totals_container:$t,qty_selector:Z};t(Bt.form).data("epo_object",Bt);var Gt=[],Jt=o.find(".variations_form");if(Jt.length>0){var Yt=function(){Jt.on("wc_variation_form.cpf",function(){Jt.data("tc_loaded")||(p(Wt),m(Wt),i(Wt),Gt=[],mt(),Ct(),setTimeout(function(){St.trigger({type:"tm-epo-update"})},10),Jt.data("tc_loaded",!0))}),$&&Jt.trigger("wc_variation_form.cpf")},Qt=!1;if(t(".variation_form_section .variations-table").length&&(Qt=!0),Qt){var Kt=function(){var t=requestAnimationFrame(Kt);Jt.data("bound")&&(cancelAnimationFrame(t),Yt(),Jt.trigger("wc_variation_form.cpf"))};Kt()}else Yt()}else setTimeout(function(){p(Wt),m(Wt),i(Wt),Gt=[],mt(),Ct(),ft(),St.trigger("tm-epo-check-dpd"),St.trigger({type:"tm-epo-update"})},20),t(".composite_data").on("wc-composite-initializing",function(e,a){a.actions.add_action("component_summary_content_updated",function(e){var a=o.find(".bto_form,.composite_form"),i=o.find("#composite_summary_"+a.data("product_id")).find(".summary_element.summary_element_"+e.step_id),r=t(".widget_composite_summary_elements").find(".summary_element.summary_element_"+e.step_id),n=a.find(".tc-epo-totals.tm-cart-"+e.step_id);n.data("tc_totals_ob")&&(i.find(".amount").html(n.data("tc_totals_ob").formatted_final_total),r.find(".amount").html(n.data("tc_totals_ob").formatted_final_total))},100,this)});gt(),ht(),vt(),function(){if(!r&&tm_epo_js.floating_totals_box&&"disable"!=tm_epo_js.floating_totals_box&&St&&$t.length){var e,a=t('<div class="tm-floating-box '+tm_epo_js.floating_totals_box+'"></div>'),i=!1,o=t(".tm-floating-box-nks"),n=t(".tm-floating-box-alt"),c=!1;o.length>0?(i=!0,a.removeClass("top left right bottom").appendTo(o).show()):n.length>0?a.removeClass("top left right bottom").appendTo(n).hide():a.appendTo("body").hide(),(o.length>0||n.length>0)&&(c=!0);var d=function(){"always"!=tm_epo_js.floating_totals_box_visibility?t(window).scrollTop()>100||c?a.is(":hidden")&&!a.is(":empty")||c?i?a.show():a.fadeIn():!a.is(":hidden")&&a.is(":empty")&&(i?a.hide():a.fadeOut()):a.is(":hidden")||(i?a.hide():a.fadeOut()):a.show()},s=function(){var o=$t.data("tm-html"),r=$t.data("tm-floating-box-data"),n=[];if(r&&r.length&&t.each(r,function(e,a){""===a.title&&(a.title="&nbsp;"),""===a.value&&(a.value="&nbsp;"),a.title?(a.title=t("<div>"+a.title+"</div>"),a.title.find("span").remove(),a.title=a.title.html()):a.title="&nbsp;",i&&(""!==a.label_show&&(a.title=""),""!==a.value_show&&(a.value="")),n.push({label_show:a.label_show,value_show:a.value_show,title:a.title,value:a.value,quantity:a.quantity,price:h(a.price,$t,!0,!1)})}),o&&""!==o||i?d():(o="",a.hide()),n&&!n.length&&n.push({label_show:"hidden",value_show:"hidden",title:"",value:"",quantity:0,price:0}),e=t.fn.tm_template(c?K.tc_floating_box_nks:K.tc_floating_box,{html_before:tm_epo_js.floating_totals_box_html_before,html_after:tm_epo_js.floating_totals_box_html_after,option_label:tm_epo_js.i18n_option_label,option_value:tm_epo_js.i18n_option_value,option_qty:tm_epo_js.i18n_option_qty,option_price:tm_epo_js.i18n_option_price,values:n,totals:o}),a.html(e),d(),"yes"==tm_epo_js.floating_totals_box_add_button){var s=St.find(H).first();s.tm_clone().addClass("tc-add-to-cart-button").on("click",function(){s.click()}).appendTo(a)}};s(),St.on("tm-epo-after-update",function(){s()}),i||(d(),"always"==tm_epo_js.floating_totals_box_visibility&&t(window).on("scroll",function(){d()}))}}(),function(){var t=x();Y.trigger("tm-from-submit",{epo:{form:t,tm_apply_validation:b,form_submit_events:Et,apply_submit_events:w,main_cart:St,main_epo_inside_form:At,product_id_selector:Zt,epo_id_selector:Ht,product_id:c,this_epo_container:Wt,this_totals_container:Xt,this_epo_totals_container:$t}}),!b(t)&&Et.length&&t.on("submit",w)}(),z(),function(){var e=$t.attr("data-theme-name");if(e){e=e.toLowerCase();var a=Wt.find("select");switch(e){case"flatsome":case"flatsome-child":case"flatsome child":a.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":a.wrap('<div class="avada-select-parent tm-select-parent"></div>'),t('<div class="select-arrow">&#xe61f;</div>').appendTo(Wt.find(".tm-select-parent")),window.calc_select_arrow_dimensions?(calc_select_arrow_dimensions(),Y.on("tmsectionpoplink cpflogicdone",function(){calc_select_arrow_dimensions()})):window.calcSelectArrowDimensions&&(calcSelectArrowDimensions(),Y.on("tmsectionpoplink cpflogicdone",function(){calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":a.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":var i=function(){setTimeout(function(){t(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").each(function(){t(this).is(".mpcthSelect")||(t(this).width(t(this).outerWidth()),t(this).customSelect({customClass:"mpcthSelect"}))})},100)};Y.on("cpflogicrun",function(){i()}),Y.on("epo_options_visible",function(){i()});break;case"handmade":case"handmade child theme":t(".tm-owl-slider.tcowl-carousel").addClass("manual")}Y.trigger("tm-theme-specific-actions",{epo:{theme_name:e,all_epo_selects:a}})}Q.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){t(this).closest(".quantity").find(Z).trigger("change.cpf")})}(),Q.tcready(function(){C()}),Y.trigger("tm-epo-compatibility",{epo:{form:x(),main_cart:St,main_epo_inside_form:At,product_id_selector:Zt,epo_id_selector:Ht,product_id:c,this_epo_container:Wt,this_totals_container:Xt,this_epo_totals_container:$t}}),Y.on("cpflogicdone",function(){_t()}),Y.trigger("tm-epo-init-end",{epo:Bt})}else Y.trigger("tm-epo-init-end-no-options")}function z(e){var a=t(e),i=a.attr("data-product-id"),o=a.attr("data-epo-id");C(a.parent(),!1,i,o)}function N(e){"no"==tm_epo_js.tm_epo_no_lazy_load&&t.extend(t.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:t.lazyLoadXT.updateEvent+" tmlazy"});var a=t(".tm-no-options-pxq, .tm-no-options-composite");a.length>0&&a.each(function(e,a){C(t(a),!1)});try{var i=t(P).not(".tm-no-options-pxq, .tm-no-options-composite");i.length>0&&i.each(function(e,a){var i=t(this),o=i.attr("data-product-id"),r=i.attr("data-epo-id"),n=!1,c=t(R+'[value="'+o+'"]').closest("form,.cart").first().parent();c.length<=0&&(c=t(U+'[value="'+o+'"]').closest("form,.cart").first().parent()).length<=0&&((c=i.closest("form,.cart").first().parent(".tm-has-options")).length<=0&&i.is(".tc-shortcode")&&(c=i.wrap('<div class="tc-shortcode-wrap tc-wrap-'+r+'"></div>'),c=i.parent()),c.length>0&&(n=!0,i.closest("form,.cart").first().append(t('<input name="add-to-cart" value="'+o+'" type="hidden" />')),i.closest("form,.cart").first().append(t('<input type="hidden" value="" class="variation_id" name="variation_id">')))),c.length>0&&(c.is("form")&&(c=c.parent()),C(c,n,o,r))})}catch(t){}}String.prototype.tmunformat=function(){var t=accounting.unformat(this,T),e=parseFloat(t);return isNaN(e)?t:e};var T=""===tm_epo_js.tm_epo_global_input_decimal_separator?tm_epo_js.currency_format_decimal_sep:getSystemDecimalSeparator(),D=""===tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_decimal_sep:getSystemDecimalSeparator(),I=""===tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_thousand_sep:","==getSystemDecimalSeparator()?".":",",S=!1,A=[],O=[],E=!1,M=tm_epo_js.tm_epo_start_animation_delay||window.tc_epo_delay||500,L=tm_epo_js.tm_epo_animation_delay||window.tc_epo_animation_delay||500,P=".tc-extra-product-options",R='input[name="add-to-cart"]',U="input.tc-add-to-cart",Z='input.qty,input[name="quantity"],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount',H=".add_to_cart_button, .single_add_to_cart_button",W=".bto_item,.component",X=t("body"),$=!1,B=".composite_data .composite_wrap .price .amount",G=".component_wrap .price",J=".woocommerce div.product p.price",Y=t(window),Q=t(document),K={price:wp.template("tc-price"),sale_price:wp.template("tc-sale-price"),tc_section_pop_link:wp.template("tc-section-pop-link"),tc_floating_box:wp.template("tc-floating-box"),tc_floating_box_nks:wp.template("tc-floating-box-nks"),tc_chars_remanining:wp.template("tc-chars-remanining"),tc_final_totals:wp.template("tc-final-totals"),tc_lightbox:wp.template("tc-lightbox"),tc_lightbox_zoom:wp.template("tc-lightbox-zoom"),tc_formatted_price:wp.template("tc-formatted-price"),tc_upload_messages:wp.template("tc-upload-messages")};K=t.tc_apply_filters("tc_adjust_template_engine",K),t.extend(t.tc_validator.messages,{required:tm_epo_js.tm_epo_global_validator_messages.required,email:tm_epo_js.tm_epo_global_validator_messages.email,url:tm_epo_js.tm_epo_global_validator_messages.url,number:tm_epo_js.tm_epo_global_validator_messages.number,digits:tm_epo_js.tm_epo_global_validator_messages.digits,maxlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.maxlength),minlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.minlength),max:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.max),min:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.min),step:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.step),lettersonly:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.alphanumericunicodespace)}),t.tc_validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},t.tc_validator.messages.alphanumeric),t.tc_validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},t.tc_validator.messages.lettersonly),t.tc_validator.addMethod("lettersspaceonly",function(t,e){return this.optional(e)||/^[a-z," "]+$/i.test(t)},t.tc_validator.messages.lettersspaceonly),t.tc_validator.addMethod("alphanumericunicode",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF]+$/i.test(t)},t.tc_validator.messages.alphanumericunicode),t.tc_validator.addMethod("alphanumericunicodespace",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF," "]+$/i.test(t)},t.tc_validator.messages.alphanumericunicodespace),t.fn.tm_find_matching_variations=function(e,a){var i=[];if(e)for(var o=0;o<e.length;o++){var r=e[o];t.fn.tm_variations_match(r.attributes,a)&&i.push(r)}return i},t.fn.tm_variations_match=function(t,e){var a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=e[i];void 0!==o&&void 0!==r&&0!==o.length&&0!==r.length&&o!==r&&(a=!1)}return a},t().tclightbox||(t.fn.tclightbox=function(){var e=this;if(0!==e.length)return e.each(function(){var e=t(this);if(!e.is(".tcinit")){var a=e.attr("src")||e.attr("data-original"),i=e.closest("label"),o=i.closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+i.attr("for")+"']");if(a=o.attr("data-imagel")||o.attr("data-imagep")||o.attr("data-image")||a){e.addClass("tcinit").before(t.fn.tm_template(K.tc_lightbox,{}));var r=e.prev();e.wrap('<div class="tc-lightbox-image-wrap"/>'),e.after(r);var n=r.find(".tc-lightbox-button"),c=new Image;c.src=a,c.onload=function(){n.addClass("tcinit").on("click.tclightbox",function(e){if(!(t(".tc-closing.tc-lightbox").length>0)){var i=t.tm_getPageSize(),o=t("<img>").addClass("tc-lightbox-img").attr("src",a).css("maxHeight",i[3]+"px").css("maxWidth",i[2]+"px"),r=t("body").tm_floatbox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomIn",animateOut:"tc-lightbox-zoomOut",data:t.fn.tm_template(K.tc_lightbox_zoom,{img:o[0].outerHTML}),zIndex:102001});t(".tc-lightbox-img, .tc-lightbox-button-close").on("click",function(){r.cancelfunc()}),e.preventDefault()}})}}}})},Q.ready(function(){t(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image").tclightbox()})),t().tmsectionpoplink||(t.fn.tmsectionpoplink=function(){var e=this;if(0!==e.length)return e.each(function(){var e=t(this),a=e.attr("data-sectionid"),i=e.attr("data-title")?e.attr("data-title"):tm_epo_js.i18n_addition_options,o=e.closest('.cpf-section[data-uniqid="'+a+'"]'),r=!1,n=t('<div class="fl-overlay"></div>').css({zIndex:e.zIndex-1,opacity:.8}),c=function(){var e=t("#tm-section-pop-up");e.parents().removeClass("noanimated"),n.unbind().remove(),e.after(o),e.remove(),o.find(".tm-section-link").show(),o.find(".tm-section-pop").hide()};e.on("click.tmsectionpoplink",function(e){e.preventDefault(),r=!1,n.appendTo("body").click(c),o.before(t.fn.tm_template(K.tc_section_pop_link,{title:i,close:tm_epo_js.i18n_close}));var a=t("#tm-section-pop-up");a.find(".float_editbox").prepend(o),o.find(".tm-section-link").hide(),o.find(".tm-section-pop").show(),a.parents().addClass("noanimated"),a.find(".details_cancel").click(function(){r||(r=!0,c())}),Y.trigger("tmlazy"),Y.trigger("tmsectionpoplink")})})}),t().cpfdependson||(t.fn.cpfdependson=function(e,a,o,r){var n=this,c=0;if(0!==n.length&&"object"==typeof e)return a||(a="show"),o||(o="all"),t.each(e,function(a,o){if("object"!=typeof e)return!0;var n,d=s(o.element);d&&d.length>0&&(d.each(function(e,a){var o=t(a);if(!n){o.closest("form");var c=".tm-product-id-"+o.closest(".tc-extra-product-options").attr("data-product-id"),d='[data-epo-id="'+o.closest(".tc-extra-product-options").attr("data-epo-id")+'"]';n=t(".tc-extra-product-options"+c+d)}if(a&&o.length>0&&(!o.data("tmhaslogicevents")||r)){if(o.is(".tm-epo-variation-element"))w("found_variation.tmlogic",!1,function(t,e){i(n),Y.trigger("tm-do-epo-update")}),w("hide_variation.tmlogic",!1,function(t,e){i(n),Y.trigger("tm-do-epo-update")});else{var s="change.cpflogic";(o.is(":text")||o.is("textarea"))&&(s="change.cpflogic keyup.cpflogic"),o.off(s).on(s,function(t){i(n)})}o.data("tmhaslogicevents",1)}}),c++)}),n.each(function(i,r){var n=t(this),d=!1;switch(n.data("matches",c).data("toggle",a).data("what",o).data("fields",e),a){case"show":d=!1;break;case"hide":d=!0}d?n.removeClass("tc-hidden"):n.addClass("tc-hidden"),n.data("isactive",d)}),n.addClass("iscpfdependson").data("iscpfdependson",1),n.each(function(){t(this).addClass("is-epo-depend")})},t.fn.run_cpfdependson=function(){i()}),t.tcepo={temp_floatbox:!1,tm_init_epo:function(t,e,a,i){C(t,e,a,i)}},Y.on("tc_manual_init",function(t,e){z(e)}),Q.ready(function(){Y.on("lazyLoadXToncomplete",function(){t(".tm-owl-slider").each(function(){t(this).trigger("refresh.owl.carousel")})}),Y.on("tc_init_epo_plugin",function(t){N()}),t.ajaxPrefilter(function(e,a,i){if("yes"==tm_epo_js.tm_epo_enable_in_shop){var o=!1,r=e.url.split("?");if(r&&r.length>=1&&(r=r[1])){for(var n=r.split("&"),c=0;c<n.length;c++){var d=n[c].split("=");d.length>=1&&d[0]&&d[1]&&"wc-ajax"==d[0]&&"add_to_cart"==d[1]&&(o=!0)}o&&(e.originalsuccess=e.success,e.success=function(i){if(i&&i.error&&i.product_url){var o=t('.ajax_add_to_cart[data-product_id="'+a.data.product_id+'"]');o.removeClass("added"),o.removeClass("loading")}else e.originalsuccess.call(null,i)})}}if(a.data){var s=a.data;"string"==typeof a.data&&(s=a.data.tmparseParams());var l=[];if(a.url&&(l=a.url.slice(a.url.indexOf("?")+1).tmparseParams()),"quantity"in s&&(s.product_id||s["add-to-cart"]||l.product_id||l["add-to-cart"]||s.tcaddtocart)){var p=s.product_id||s["add-to-cart"]||l.product_id||l["add-to-cart"]||s.tcaddtocart,m=t(".tc-extra-product-options.tm-product-id-"+p);if(1==m.length){var _=t(".tc-totals-form.tm-product-id-"+p).find(".cpf-product-price").val(),f=t(".tc-totals-form.tm-product-id-"+p).find(".tc_form_prefix").val(),u={tcajax:1,tcaddtocart:p,cpf_product_price:_};f&&(u.tc_form_prefix=f),e.data=e.data+"&"+t.param(t.extend(m.tm_aserializeObject(),u),!1)}}}}),Q.ajaxSuccess(function(e,a,i){t(".tm-cart-link").tmpoplink();var o=t.parseJSON(tm_epo_js.quickview_array||[]),r=t.parseJSON(tm_epo_js.quickview_container||[]),n={};for(var c in r)n[r[c][0]]=t(r[c][1]);t.extend(o,n);for(var d in o)if(o.hasOwnProperty(d)){var s=t(o[d]);if(s.length){if("yith_quick_view_plugin"==d&&s.find(".product").length<=0)continue;"woodmart_quick_view"!=d&&"lightboxpro"!=d&&"jckqv_quick_view"!=d&&"yith_quick_view_plugin"!=d&&"theme_flatsome"!=d||($=!0);var l=(E=s).find(P).attr("data-product-id"),p=E.find(P).attr("data-epo-id");C(E,!0,l,p),Y.trigger("tmlazy"),Y.trigger("tm_epo_loaded_quickview"),t.jMaskGlobals&&E.find(t.jMaskGlobals.maskElements).each(function(){var e=t(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))})}}}),X.on("sober_quickview_opened",function(e){var a=(E=t("#quick-view-modal")).find(P).attr("data-product-id"),i=E.find(P).attr("data-epo-id");C(E,!0,a,i),Y.trigger("tmlazy"),Y.trigger("tm_epo_loaded_quickview"),t.jMaskGlobals&&E.find(t.jMaskGlobals.maskElements).each(function(){var e=t(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))})}),t("#wholesale_form").on("submit",function(){var e=t("form.cart").find(R).val(),a=t(P+'.tm-cart-main[data-product-id="'+e+'"]').tm_clone(),i=t('.tm-totals-form-main[data-product-id="'+e+'"]').tm_clone(),o=t('<div class="tm-hidden tm-formepo"></div>');return o.append(a),o.append(i),t(this).append(o),!0}),N(),t(".tm-cart-link").tmpoplink(),X.on("updated_checkout",function(){t(".tm-cart-link").tmpoplink()}),Y.trigger("tmlazy"),Y.trigger("tm_epo_loaded")}),t(document).ready(function(){t(document).on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){t(this).closest(".quantity").find("input.qty").trigger("change")}),t(document).on("click","#add_to_quote",function(e){if(tm_epo_js&&"yes"==tm_epo_js.tm_epo_global_enable_validation){var a=t(this).parents("form"),i=a.find(".tm-epo-counter").val(),o=t(P+'[data-epo-id="'+i+'"]');if(a.length>0&&o.length>0&&!a.tc_validate().form())return void e.stopImmediatePropagation()}})})}(jQuery);